
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="AllStarLink Manual">
      
      
        <meta name="author" content="AllStarLink Team">
      
      
        <link rel="canonical" href="https://allstarlink.github.io/print_page/">
      
      
      
      
      <link rel="icon" href="../assets/allstarlink.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.25">
    
    
      
        <title>Print Site - AllStarLink Manual</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="allstarlink" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="AllStarLink Manual" class="md-header__button md-logo" aria-label="AllStarLink Manual" data-md-component="logo">
      
  <img src="../assets/allstar-logo-small.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AllStarLink Manual
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Print Site
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../user-guide/" class="md-tabs__link">
          
  
    
  
  User Guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../pi/" class="md-tabs__link">
          
  
    
  
  Pi Appliance

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../adv-topics/" class="md-tabs__link">
          
  
    
  
  Advanced Topics

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../allmon3/" class="md-tabs__link">
          
  
    
  
  Allmon3

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../developers/" class="md-tabs__link">
          
  
    
  
  Developer Guide

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="AllStarLink Manual" class="md-nav__button md-logo" aria-label="AllStarLink Manual" data-md-component="logo">
      
  <img src="../assets/allstar-logo-small.png" alt="logo">

    </a>
    AllStarLink Manual
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../user-guide/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    User Guide
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/whats-new/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's New?
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/pi-detailed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Raspberry Pi Install
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debian 12 Install
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/menu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ASL3 Menu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Updating ASL3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/known-issues-diffs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Differences & Issues
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/passwords/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logins and Passwords
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ASL3 Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/betatest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Beta Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-guide/troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Troubleshooting Tips
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../pi/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Pi Appliance
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Pi Appliance
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi/cockpit-basics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cockpit Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi/cockpit-console/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Terminal / Console
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi/cockpit-network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi/cockpit-updates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Software Updates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi/cockpit-services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Services Management
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pi/cockpit-firewall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing the Firewall
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../adv-topics/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Advanced Topics
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Advanced Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    New Commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/incompatibles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Incompatibilities with Legacy Versions &amp; Configs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/usbinterfaces/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    USB Audio Interfaces
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/sa818modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SA818 RF Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/conftmpl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Asterisk Templates
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/httpreg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP Registration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/allowdenylists/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Allow and Deny Lists
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/other-software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other Software Products
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/sip-phone/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up a SIP Phone
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/broadcastify/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Streaming Node Audio to Broadcastify
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/hotspot_hd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hot Spot Unkey Delay
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/autopatch/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Autopatch
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/permissions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Permissions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../adv-topics/noderesolution/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node Resolution
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../allmon3/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Allmon3
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Allmon3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../allmon3/install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../allmon3/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../allmon3/usermgmt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../developers/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Developer Guide
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developers/package-builds/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Building ASL3-Asterisk
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developers/source-install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Source-Based Installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developers/aptly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AllStarLink Apt Repos
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index"><h1 id="index-welcome-to-allstarlink-3">Welcome to AllStarLink 3</h1>
<p>AllStarLink’s version 3 is the next generation of AllStar repeater and
hotspot software.  This version of AllStar has been redesigned to run
on Asterisk 20 LTS (Long Term Support), the latest Debian Linux operating
system, and modern hardware or virtual machines. The update from Asterisk
1.4 to Asterisk 20 implements over 15 years of Asterisk bug fixes, security
improvements and enhancements.  It brings with it the latest Asterisk
applications, channel drivers and additional functionality.</p>
<p><a class="glightbox" href="../img/pi-appl-landing.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img align="right" alt="AllStarLink Landing Page" src="../img/pi-appl-landing.png" width="40%" /></a></p>
<p>This update required app_rpt (the Asterisk application
that is AllStar) and it's various modules to be heavily modified. Many memory
leaks have been addressed, modules load or refresh more reliably and many bugs
have been squashed. This all adds up to improved stability and uptime.</p>
<p>In addition to the many app_rpt improvements and fixes, the code base is easier
to maintain and enhance. The goal being to make app_rpt code accessible to more
AllStar developers. Also, the app_rpt code base has been modified to meet Asterisk®
coding guidelines.</p>
<p><strong>Supported Hardware &amp; Software</strong></p>
<ul>
<li>Any x86_64/amd64 hardware device</li>
<li>Any emulated x86_64/amd64 virtual machine</li>
<li>Any arm64-based device such as Raspberry Pi</li>
<li>Any emulated arm64 virtual machine</li>
<li>Debian 12</li>
</ul>
<h1 id="index-new-features">New Features</h1>
<p>In addition to the app_rpt code update, we have added many new features to
make ASL3 the best AllStar release yet.</p>
<ul>
<li>Asterisk runs as non-root for increased security.</li>
<li>Raspberry Pi image with attractive landing page, system management, service discovery and reduced microSD wear.</li>
<li>Packages for Debian 12 Bookworm for any platform running x86_64/amd64 and arm64</li>
<li>Worry free apt updates and upgrades. Linux Kernel updates won't break your node!</li>
<li>HTTP AllStarLink Registration and DNS IP address resolution with fallback to file.</li>
<li>USB improvements including live logic view and auto device string discovery.</li>
<li>Improved menu includes compatibility with user config file edits.</li>
<li>Access lists modified to individual per node lists with CLI or menu management.</li>
<li>Configuration templates to simplify edits and menu updates.</li>
<li>EchoLink code has been extensively reworked to improve stability. Added chats and doubling prevention.</li>
</ul>
<!--
![AllStarLink Landing Page](assets/AllstarLink-StarBlack.png){ width="100"}
--></section>
                        <h1 class='nav-section-title' id='section-user-guide'>
                            User Guide <a class='headerlink' href='#section-user-guide' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="user-guide"><h1 id="user-guide-asl3-user-guide">ASL3 User Guide</h1>
<p>This is the AllStarLink version 3 User's Guide. No doubt you're you've noticed this is not a Wiki. The <a href="https://wiki.allstarlink.org">ASL Wiki</a> still exists, largely to document ASL1 and ASL3, while this manual covers ASL3 specifics and is the future home for all ASL documentation.</p>
<p>Did you see the "Next" and "Previous" menu items? Those will page to the next section of this document in the order of the bullets below. We think you'll find this an orderly way to learn about ASL3.  Lets get started.</p>
<ul>
<li><a href="#user-guide-whats-new">What's New?</a></li>
<li><a href="#user-guide-pi-detailed">Raspberry Pi Image Install</a></li>
<li><a href="#user-guide-install">Debian 12 x86 Install</a></li>
<li><a href="#user-guide-menu">ASL3 Menu</a></li>
<li><a href="#user-guide-updates">Updating ASL3</a></li>
<li><a href="#user-guide-known-issues-diffs">Known Issues</a></li>
<li><a href="#user-guide-passwords">Logins and Passwords</a></li>
<li><a href="#user-guide-support">ASL3 Support</a></li>
<li><a href="#user-guide-betatest">Beta Testing</a></li>
<li><a href="#user-guide-troubleshooting">Basic Troubleshooting Tips</a></li>
</ul></section><section class="print-page" id="user-guide-whats-new"><h1 id="user-guide-whats-new-whats-new">What's New?</h1>
<p>Ready to get on with installation? We thought so, but first consider that ASL3 is very new. You'll probably want to install on removable media or on a non-production system. You probably don't want to install a production system right away. Give yourself some time to test that everything works as you'd expect.</p>
<p>Note: if you have installed an earlier version of ASL you need to know that ASL3 has many changes and that there's a bit of a learning curve. For those who have used ASL2 or other versions of AllStar you should be aware of a few important details:</p>
<ul>
<li>At the risk of repeating ourselves, ASL3 now runs on Asterisk 20!  We are no longer stuck in the past.  We're so proud!!!</li>
<li>There is no update or migration path from ASL2 to ASL3</li>
<li>Many of the ASL3 configuration files are different<ul>
<li>The configuration files now support templates</li>
<li>We now favor node registration using HTTP</li>
<li>The SimpleUSB and USBRadio tune settings have been moved into their respective (.conf) configuration files.  We no longer have separate per-node tune setting files.</li>
</ul>
</li>
<li>EchoLink changes<ul>
<li>EchoLink chat has been enabled</li>
<li>EchoLink now honors the app_rpt timeout timer.  A text message is sent to the client when they time out.</li>
<li>EchoLink longer allows clients to double.  A text message is sent to the client when they are doubling.</li>
</ul>
</li>
</ul>
<p>The two node numbers per user policy remains in effect. Node numbers are a limited resource. Please make a best effort to use new media, a new server, or NNX to build a node for testing. We do make exceptions on a case by case basis but we'd really appreciate it if you could use a resource you already have.</p>
<h2 id="user-guide-whats-new-menu-changes">Menu Changes</h2>
<p>The ASL3 menu has been updated. Our goal is to provide an easy way for you to configure your node and to minimize the need to edit any configuration files.</p>
<p>At the same time, we have removed most of the "OS" configuration options found in earlier implementations. Historically, ASL has been installed on many OS variants and the OS commands that work on one version do not always work on others. For that reason there are no OS related commands in the ASL3 menu.</p>
<p>See <a href="#user-guide-menu">Menu</a> for details.</p>
<h2 id="user-guide-whats-new-configuration-changes">Configuration Changes</h2>
<p>The first thing to know about ASL3 configuration is that the menu can be used to make and view common changes. Here are the highlights. You may want to read about <a href="#adv-topics">Advanced Topics</a> and <a href="#adv-topics-commands">New Commands</a> details later.</p>
<ul>
<li>You may edit the conf files without concern of switching between editing and using the menu. The tune menus are removing leading white space from comments (we're hoping to fix this).</li>
<li>An Asterisk template is now used within <code>rpt.conf</code>, <code>simpleusb.conf</code>, and <code>usbradio.conf</code>.  Editing is much easier but it's different than with other versions of AllStar. Node settings are much simpler with only a few lines needed to be added/updated for each node. The ASL3 menu handles the new templated configuration.</li>
<li>AllStar registration is now set in <code>rpt_http_registration.conf</code>, not in <code>iax.conf</code>. IAX registration still works but is discouraged. Please do not configure your node for both HTTP and IAX registration. The new Asterisk CLI command to show the registration status of your nodes is <code>rpt show registrations</code>.  This command can be performed from the ASL3 menu.</li>
<li>The USB configuration files now contain the tune settings. There is no tune file for each node as in ASL2. The tune menus and the Asterisk CLI write to the new tune setting locations.</li>
<li>There is no need to edit or use a script to update the access list, formerly known as the blacklist and whitelist. The settings are different because the access list is now per node rather than for all nodes as in other AllStar versions. It's also much easier to use the ASL3 menu to build the access lists.</li>
</ul>
<h2 id="user-guide-whats-new-ap-measurement">A&amp;P Measurement</h2>
<p>Adoption and Performance measurements are to help ASL understand growth and technical aspects of ASL3. No sensitive or private information is collected. For details see <a href="https://github.com/AllStarLink/ASL3-Usage">GitHub/AllStarLink/ASL3-Usage</a>. Reports are available at <a href="https://repo.allstarlink.org/reports/">repo.allstarlink.org/reports/</a>.</p></section><section class="print-page" id="user-guide-pi-detailed"><h1 id="user-guide-pi-detailed-raspberry-pi-install">Raspberry Pi Install</h1>
<p>The Raspberry Pi image includes
the following to make a complete AllStarLink system:</p>
<ul>
<li>Debian 12 operating system</li>
<li>Asterisk 20 LTS + app_rpt</li>
<li>asl-* commands</li>
<li>ASL3 Menu (asl-menu)</li>
<li>Allmon3</li>
<li>Web-based administration</li>
<li>A nice landing page</li>
</ul>
<p><strong>You must use the Raspberry Pi Imager</strong> even if you prefer another imager and carefully follow the instructions below.
Failure to do so will result in a system that won't boot or that you will not be able to login to.</p>
<p>You will install an image on a microSD card and go. This is the simplest install. For
most nodes, the menus will walk you through the setup. <strong>Note: a minimum SD card size
of 4G is required and it is recommended to use at least an 8G SD card.</strong></p>
<h2 id="user-guide-pi-detailed-pi-appliance-requirements">Pi Appliance Requirements</h2>
<p>The following are the system requirements for the Pi Appliance</p>
<table>
<thead>
<tr>
<th></th>
<th>Required</th>
<th>Recommended</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Hardware</strong></td>
<td>Arm v8 64-bit CPU <br> Raspberry Pi 3, 4, 5, Zero 2 W, 400</td>
<td>Raspberry Pi 4B or 5B</td>
</tr>
<tr>
<td><strong>Memory</strong></td>
<td>Minimum 512M</td>
<td>4G</td>
</tr>
<tr>
<td><strong>Storage</strong></td>
<td>Minimum 4G or larger</td>
<td>8GB Class 10</td>
</tr>
</tbody>
</table>
<p>The ASL3 Appliance been tested on Raspberry Pi 3, 4, 5, and Zero 2W.</p>
<h2 id="user-guide-pi-detailed-step-by-step-pi-appliance-setup">Step-by-Step Pi Appliance Setup</h2>
<p>These directions are specific for Windows by example , but in general,
should work the same for the same tool set on MacOS and Linux. For each screenshot
below, click on the image for a larger version.</p>
<p>Note: For this example and all documentation, the hostname used shall be
<code>node63001</code> and the node number is <code>63001</code>. Replace "63001" with your
node number as you proceed through these directions.</p>
<ol>
<li>
<p>If you do not already have it installed, install the
<a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a>.</p>
</li>
<li>
<p>Download the <a href="https://repo.allstarlink.org/images/pi/">latest release image</a>. This will
be named <code>allstar3-arm64-X.Y.Z.img.xz</code> where "X.Y.Z" is the version. The version will
be something like 3.0.10. Save it to your local <code>Downloads</code> directory.</p>
</li>
<li>
<p>Launch <strong>Raspberry Pi Imager</strong> from the start menu.</p>
<p><a class="glightbox" href="../user-guide/img/step-3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 3" src="../user-guide/img/step-3.png" width="400" /></a></p>
</li>
<li>
<p>Click on <strong>CHOOSE DEVICE</strong> and choose the type of
Pi hardware on which AllStarLink 3 Appliance is being installed.</p>
<p><a class="glightbox" href="../user-guide/img/step-4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 4" src="../user-guide/img/step-4.png" width="400" /></a></p>
</li>
<li>
<p>Click on <strong>CHOOSE OS</strong>. Scroll to the bottom of the
list that appears and select <strong>Use custom</strong>.</p>
<p><a class="glightbox" href="../user-guide/img/step-5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 5" src="../user-guide/img/step-5.png" width="400" /></a></p>
</li>
<li>
<p>A <strong>Select image</strong> dialog box will appear. Navigate to the
<code>Downloads</code> folder and select the image downloaded in step 2.
It will be named something like allstar3-arm64-3.0.1.img.xz.
Then click <strong>Open</strong>.</p>
<p><a class="glightbox" href="../user-guide/img/step-6.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 6" src="../user-guide/img/step-6.png" width="400" /></a></p>
</li>
<li>
<p>Connect the SD card or the SD card in a USB adapter to
the computer. Then click on <strong>CHOOSE STORAGE</strong>. An option
will be presented named something such as "Mass Storage Device USB
Device - 16.0 GB". Click on that entry.</p>
<p><a class="glightbox" href="../user-guide/img/step-7.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 7" src="../user-guide/img/step-7.png" width="400" /></a></p>
</li>
<li>
<p>Click <strong>NEXT</strong></p>
</li>
<li>
<p>A box labelled "Use OS customisation?" will appear. Click on
<strong>EDIT SETTINGS</strong></p>
<p><a class="glightbox" href="../user-guide/img/step-9.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 9" src="../user-guide/img/step-9.png" width="400" /></a></p>
</li>
<li>
<p>Check the box next to <strong>Set hostname</strong> and enter a hostname
for the device to appear as on the network. In this example,
<code>node63001</code> is used. Unless you have another naming convention
for AllStarLink nodes, use the nodeNNNNN format.</p>
</li>
<li>
<p>Check the box next to <strong>Set username and password</strong>
and enter a username and password. It is recommended to set the
username to 'asl' if you have no strong feeling about the
username. Choose a good password and record the password somewhere
safe. <strong>NOTE: There is NO DEFAULT USER for the image. Failure to
set an account will require a reimage of the SD card with the
proper settings.</strong></p>
</li>
<li>
<p>If the device will be connected to WiFi, check the
box "Configure wireless LAN" and then enter
the name of the wireless network in <strong>SSID</strong> and the password for
that network in <strong>Password</strong>. Change the "Wireless LAN country" to <strong>US</strong>
or another country as appropriate. Setting this is not necessary
if the Pi will use a network cable rather than wireless.</p>
</li>
<li>
<p>Check the box next to <strong>Set locale settings</strong> and change the "Time zone"
to the desired region. The timezone settings will control any time-based
announcements and schedule jobs. After completing steps 10-13, the customization
should look something like:
    <a class="glightbox" href="../user-guide/img/step-13.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 13" src="../user-guide/img/step-13.png" width="400" /></a></p>
</li>
<li>
<p>Click <strong>SAVE</strong> in "OS Customisation".</p>
</li>
<li>
<p>Click <strong>YES</strong> for "Use OS customisation?"</p>
</li>
<li>
<p>Click <strong>YES</strong> to continue to write the image to the SD card.</p>
<p><a class="glightbox" href="../user-guide/img/step-16.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 16" src="../user-guide/img/step-16.png" width="400" /></a></p>
</li>
<li>
<p>Depending on the speed of the computer and the type of SD card
one will have time for a beverage of their choice. When the write is complete,
eject the card, remove the card from computer and insert it into the Pi.
If using a USB adapter for the SD card, remove the SD card from the adapter
and insert the card into the Pi. The Pi <strong>will not</strong> use the SD card in the
USB adapter.</p>
</li>
<li>
<p>Power on the Pi. Wait approximately 2 to 5 minutes for the Pi to boot
and perform the various first boot tasks. Depending on the type of a Pi
board used, this process could be lengthy. If there is a screen connected
to the Pi, it will be noted that Pi will reboot several times.
This is normal and expected.</p>
</li>
<li>
<p>(Optional) Network connectivity may be tested using the command
to ping the hostname set in step 10. For example, if the hostname
set was "node63001" then do <code>ping -4 node63001.local</code> from a
command prompt or PowerShell window. When you get a response,
the host is connected to the network.</p>
<p><a class="glightbox" href="../user-guide/img/step-19.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 19" src="../user-guide/img/step-19.png" width="400" /></a></p>
</li>
<li>
<p>Open the browser on your computer and navigate to <code>https://nodeNNNNN.local</code>. In this
example the name was <code>node63001</code> then one would enter <code>https://node63001.local</code>.
Your Pi and your computer must be on the same LAN for this to work.
Use the IP address rather than the hostname if the Pi is on a remote network or the hostname is unreachable.
Depending on your network and browser, one may have to enter the name several times until the
page displayed. The first connection will report a message that
"Your connection isn't private". For the Pi appliance, this is
acceptable. Click on <strong>Advanced</strong> and then
<strong>Continue to node63001.local (unsafe)</strong>. This only must be done
the first time.</p>
<p><a class="glightbox" href="../user-guide/img/step-20.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 20" src="../user-guide/img/step-20.png" width="400" /></a></p>
</li>
<li>
<p>The AllStarLink Launchpad will appear. Clicking on
<strong>Web Admin Portal</strong> will take one to the web-based administration
portal that includes a web-based SSH client for using asl-menu
and other commands. Clicking on <strong>Node Links</strong> will take one
to the Allmon3 interface. Clicking on <strong>ASL Manual</strong> will take one
to the top of this manual.</p>
<p><a class="glightbox" href="../user-guide/img/step-21.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 21" src="../user-guide/img/step-21.png" /></a></p>
</li>
<li>
<p>To setup the new node, click on <strong>Web Admin Portal</strong>. Similar
to step 20, click <strong>Advanced</strong> and <strong>Continue to node63001.local (unsafe)</strong>
to see the logon box.This only must be done the first time. Enter
the username and password configured during the imaging process
above. Click <strong>Log in</strong></p>
<p><a class="glightbox" href="../user-guide/img/step-22.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 22" src="../user-guide/img/step-22.png" /></a></p>
</li>
<li>
<p>The Overview tab is displayed. Using the Web Admin Portal (Cockpit)
 with AllStarLink is <a href="#pi">covered in the manual</a>. At the top,
 click on *<em>Turn on administrative access</em></p>
<p><a class="glightbox" href="../user-guide/img/step-23.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 23" src="../user-guide/img/step-23.png" /></a></p>
<p>Enter the password again when prompted and click <strong>Authenticate</strong></p>
<p><a class="glightbox" href="../user-guide/img/step-23-b.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 23B" src="../user-guide/img/step-23-b.png" /></a></p>
</li>
<li>
<p>The web-based SSH console appears as <strong>Terminal</strong> at the bottom
of the left scrollable menu. Click it and SSH console will appear:</p>
<p><a class="glightbox" href="../user-guide/img/step-24.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 24" src="../user-guide/img/step-24.png" /></a></p>
</li>
</ol>
<p>The Terminal window is a complete interface to AllStarLink,
Asterisk, and more. No SSH client is required although use
of SSH directly is fully supported.</p>
<h2 id="user-guide-pi-detailed-quick-config-via-asl-menu">Quick Config via ASL-Menu</h2>
<p>The node may now be configured. New users or those wanting a
quick start experience should <a href="#user-guide-menu">use the asl-menu utility</a>
with <code>sudo asl-menu</code>.</p>
<p><a class="glightbox" href="../user-guide/img/term-asl-menu-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Web ASL Menu 1" src="../user-guide/img/term-asl-menu-1.png" /></a></p>
<p>The menu will appear:</p>
<p><a class="glightbox" href="../user-guide/img/term-asl-menu-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Web ASL Menu 2" src="../user-guide/img/term-asl-menu-2.png" /></a></p>
<h2 id="user-guide-pi-detailed-asterisk-console">Asterisk Console</h2>
<p>To start the asterisk console from the Terminal window
enter <code>sudo asterisk -rv</code>.</p>
<p><a class="glightbox" href="../user-guide/img/term-ast-console.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Web Ast Console" src="../user-guide/img/term-ast-console.png" /></a></p>
<h2 id="user-guide-pi-detailed-software-updates">Software Updates</h2>
<p>One should also apply any latest updates and reboot the device
as described in <a href="#pi-cockpit-updates">Cockpit Updates</a>.</p>
<h2 id="user-guide-pi-detailed-allmon3-default-login">Allmon3 Default Login</h2>
<p>The default-configured username and password combination is <code>allmon3 / password</code>.</p>
<p><strong>You <em>must</em> delete this and add a new one</strong>.</p>
<ul>
<li>Launch Web Admin Portal (aka Cockpit)</li>
<li>Open terminal</li>
<li>Type <code>sudo allmon3-passwd --delete allmon3</code> to remove the default login</li>
<li>Type <code>sudo allmon3-passwd &lt;new user login&gt;</code> to set the new user login. Type the new password when prompted.</li>
<li>Type <code>sudo systemctl restart allmon3</code> to load the new login.</li>
</ul>
<p>Details on updating the login(s) and other Allmon3 settings can be found in the
<a href="#allmon3">Allmon3 section of the manual.</a>.</p>
<h2 id="user-guide-pi-detailed-logging-out">Logging Out</h2>
<p>When finished with the admin system, click on <strong>Session</strong>
in the upper right and then choose <strong>Logout</strong>.</p>
<h2 id="user-guide-pi-detailed-node-configuration">Node Configuration</h2>
<p>Next step is to configure the node settings. YouTuber Freddie Mac has a nice ASL3 installation and configuration video. See <a href="https://youtu.be/aeuj-yI8qrU">https://youtu.be/aeuj-yI8qrU</a>.  Also see <a href="#user-guide-menu">ASL3 Menu</a> for details.</p></section><section class="print-page" id="user-guide-install"><h1 id="user-guide-install-debian-12-install">Debian 12 Install</h1>
<p>These instructions are for installing ASL3 on various x86 systems. AllStarLink v3 is supported on Debian 12 Bookworm systems, and those based on Bookworm (e.g. Raspberry Pi OS). Both the x86_64/amd64 and arm64/aarch64 platforms are supported through apt/deb installation packages.</p>
<p>Note that currently the project does not support armv7l/armhf platforms because all known use of AllStarLink is on hardware which supports the Bookworm arm64 distribution such as Raspberry Pi 3, 4, 5, and Zero 2 W. If you have a platform that must use armv7l/armhf 32-bit packages only please file an issue at <a href="https://github.com/AllStarLink/ASL3/issues">ASL3 on GitHub</a>.</p>
<h2 id="user-guide-install-os-install">OS Install</h2>
<p>You’re going to start off by installing a new Debian 12 OS on your PC computer or virtual machine. There are instructions all over the internet that detail how to install Debian 12. Briefly you:</p>
<ul>
<li>Download and boot the Debian 12 net install .iso</li>
<li>Take most of the defaults</li>
<li>Do not install a <code>Debian desktop environment</code></li>
<li>Do install <code>web server</code> (if you plan to use Allmon3 or other web management packages)</li>
<li>Do install <code>SSH server</code></li>
</ul>
<h2 id="user-guide-install-allstarlink-package-repo-install">AllStarLink Package Repo Install</h2>
<p>Once your Debian system is up and running, install the ASL package repositories:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/tmp
wget<span class="w"> </span>https://repo.allstarlink.org/public/asl-apt-repos.deb12_all.deb
sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>asl-apt-repos.deb12_all.deb
sudo<span class="w"> </span>apt<span class="w"> </span>update
</code></pre></div>
<h2 id="user-guide-install-asl3-packages-install">ASL3 Packages Install</h2>
<p>Now the packages may be installed and updated directly from the AllStarLink package
repository:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>asl3
</code></pre></div>
<p>This will install the complete ASL3 system including
all of the Asterisk app_rpt-enabled packages
(asl3-asterisk, asl3-asterisk-config, asl3-asterisk-doc, asl3-asterisk-modules),
the Dahdi kernel module (dahdi-dkms, dahdi-linux, dahdi-source), the needed
development tools to keep the kernel module updated, and the asl3-menu.</p>
<p>It's important to note that the new packaging format will allow for easy,
automated updates of kernels through the standard <code>apt upgrade</code> process.
There is no longer any reason to hold back kernel upgrades with the ASL3
packaging.</p>
<p>The following packages are also available and may be installed separately:</p>
<p><strong>Allmon3</strong> - The updated web interface to AllStarLink which includes strong
support for mobile devices and screens of all sizes and shapes.
See the <a href="#allmon3">Allmon3 page</a> for details.</p>
<p><strong>ASL3 Nodelist Updater</strong> - An updated node service to maintain a local copy of
the AllStarLink node database (rpt_extnodes). While, in general, the
preferred method of node lookup is DNS, some installations with
slow Internet or DNS servers that have very long cache timers may benefit
from this method of node lookup instead.
Install with <code>sudo apt install asl3-update-nodelist</code>.</p>
<h2 id="user-guide-install-node-configuration">Node Configuration</h2>
<p>Next step is to configure the node settings. YouTuber Freddie Mac has a nice ASL3 RPi installation and configuration video. See the part where the asl-menu is shown <a href="https://youtu.be/aeuj-yI8qrU">https://youtu.be/aeuj-yI8qrU</a>. Also see <a href="#user-guide-menu">ASL3 Menu</a> for details.</p>
<h2 id="user-guide-install-docker">Docker</h2>
<p>Docker support will be coming in the near future.</p></section><section class="print-page" id="user-guide-menu"><h1 id="user-guide-menu-asl3-menu">ASL3 Menu</h1>
<p>Once you have installed ASL3 on your system you will want to configure your node.
The ASL3 menu will help you get started with many common configurations including nodes with USB audio interfaces and "hub" nodes.
The ASL3 menu will also help you maintain your system.</p>
<p>Your system may have been setup to automatically start the ASL3 menu as soon as you have logged in.
If not, you can access the ASL3 menu by executing the following command from the Linux shell :</p>
<div class="highlight"><pre><span></span><code>asl-menu
</code></pre></div>
<p>Note: if you are not logged in as the "root" user you will need to use</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>asl-menu
</code></pre></div>
<p>When the ASL3 menu is running you will be presented with options to configure a node, access the Asterisk CLI, backup (or restore) your ASL settings, access the Linux CLI, perform some basic diagnostics, and perform some common system actions.</p>
<h2 id="user-guide-menu-node-settings">Node settings</h2>
<p>For new installs you will want to select the ASL3 "Node Settings" menu option.
This is where you will configure the basic settings needed to get your new node on the air.
You can return to this menu later to review and/or update your node settings.</p>
<p>The "Node Settings" menu allows you update key node settings including :</p>
<ul>
<li>Node number</li>
<li>Node password</li>
<li>Node Callsign/ID</li>
<li>Radio interface (e.g. USB sound device, HUB node)</li>
<li>Duplex type (e.g. full duplex, half duplex, telemetry)</li>
<li>USB Interface tuning</li>
<li>Enable/disable status posting (to <a href="http://stats.allstarlink.org">http://stats.allstarlink.org</a>)</li>
</ul>
<p>The "Node Settings" menu also allows you to add (or remove) additional nodes.</p>
<p>Note: you can also use the <code>node-setup</code> command to access this menu.</p>
<h2 id="user-guide-menu-asterisk-cli">Asterisk CLI</h2>
<p>The Asterisk CLI provides direct access to the heart of what makes an AllStar node.
You might use the CLI for testing, troubleshooting, or for controlling your node.
You should know that many of the commands require a more in-depth knowledge of Asterisk.
The good news is that many of the commonly used commands can be executed from the "Diagnostics Menu" or with one of the web management/monitoring applications (e.g. Allmon3).</p>
<h2 id="user-guide-menu-backup-and-restore">Backup and Restore</h2>
<p>The ASL3 "Backup and Restore" menu option provides a simple option to backup (and restore) your AllStar and Asterisk configuration.
The backup archives are stored locally on your system and optionally in the cloud.</p>
<p>We encourage you to "backup" your configuration, especially before and after you make changes.</p>
<p>Note: you can also use the <code>asl-backup-menu</code> command to access this menu.</p>
<h2 id="user-guide-menu-diagnostics">Diagnostics</h2>
<p>The ASL3 "Diagnostics" menu option allows you to perform some simple/rudimentary checks of your system and node.
These include basic internet connectivity checks and reporting of your AllStar registrations.
We also provide a way to stop, start, and restart some of the AllStar and Asterisk services that run on your system.</p>
<p>Note: you should know that these diagnostics are not exhaustive.  With a good connection to the internet and a valid configuration all "should be" OK.
If the provided diagnostics don't flag an issue then you will need to dig deeper.
Be aware of changes you make to your system and configuration.
Be aware of software packages that you install.
Be aware of "upgrades".
If you need help, reach out to the AllStarLink Community.</p>
<h2 id="user-guide-menu-expert-configuration">Expert Configuration</h2>
<p>The ASL3 "Expert Configuration Menu" option will allow you to make changes to some of the AllStar and Asterisk configuration files (in the "/etc/asterisk" directory).
But, don't worry about that advanced stuff just yet.</p>
<h2 id="user-guide-menu-bash-shell">Bash shell</h2>
<p>The "bash" shell provides access to the Linux command line interface, also known as the Linux CLI. This is for experts or if you have been provided with CLI instructions.</p></section><section class="print-page" id="user-guide-updates"><h1 id="user-guide-updates-updating-asl3">Updating ASL3</h1>
<p>All of the software components that make up AllStarLink v3 are
provided by software packages (Debian .deb files) from an
centralized Apt repository. This makes upgrades quick and
painless for users.</p>
<h2 id="user-guide-updates-standard-debian-upgrades">Standard Debian Upgrades</h2>
<p>Whether AllStarLink v3 is installed on a standard Debian 12
installation or you are using the Pi appliance image,
updates follow the standard Debian format:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>upgrade<span class="w"> </span>-y
</code></pre></div>
<p>This will update all AllStarLink v3 software as well as
the underlying operating system. AllStarLink will never
release any update that is a "breaking change" through
the apt system that doesn't have either an automated upgrade
process or a well-documented manual step-by-step process.</p>
<p>A reboot is only needed when a new Linux kernel has been installed.</p>
<p>Sometimes an update may ask what to do with a configuration
file. It is generally best to answer such questions with
<code>N</code> meaning "keep your currently-installed version. Such a question
will look like:</p>
<div class="highlight"><pre><span></span><code>Configuration<span class="w"> </span>file<span class="w"> </span><span class="s1">&#39;/etc/asterisk/rpt.conf&#39;</span>
<span class="w"> </span><span class="o">==</span>&gt;<span class="w"> </span>Modified<span class="w"> </span><span class="o">(</span>by<span class="w"> </span>you<span class="w"> </span>or<span class="w"> </span>by<span class="w"> </span>a<span class="w"> </span>script<span class="o">)</span><span class="w"> </span>since<span class="w"> </span>installation.
<span class="w"> </span><span class="o">==</span>&gt;<span class="w"> </span>Package<span class="w"> </span>distributor<span class="w"> </span>has<span class="w"> </span>shipped<span class="w"> </span>an<span class="w"> </span>updated<span class="w"> </span>version.
<span class="w">   </span>What<span class="w"> </span>would<span class="w"> </span>you<span class="w"> </span>like<span class="w"> </span>to<span class="w"> </span><span class="k">do</span><span class="w"> </span>about<span class="w"> </span>it<span class="w"> </span>?<span class="w">  </span>Your<span class="w"> </span>options<span class="w"> </span>are:
<span class="w">    </span>Y<span class="w"> </span>or<span class="w"> </span>I<span class="w">  </span>:<span class="w"> </span>install<span class="w"> </span>the<span class="w"> </span>package<span class="w"> </span>maintainer<span class="err">&#39;</span>s<span class="w"> </span>version
<span class="w">    </span>N<span class="w"> </span>or<span class="w"> </span>O<span class="w">  </span>:<span class="w"> </span>keep<span class="w"> </span>your<span class="w"> </span>currently-installed<span class="w"> </span>version
<span class="w">      </span>D<span class="w">     </span>:<span class="w"> </span>show<span class="w"> </span>the<span class="w"> </span>differences<span class="w"> </span>between<span class="w"> </span>the<span class="w"> </span>versions
<span class="w">      </span>Z<span class="w">     </span>:<span class="w"> </span>start<span class="w"> </span>a<span class="w"> </span>shell<span class="w"> </span>to<span class="w"> </span>examine<span class="w"> </span>the<span class="w"> </span>situation
<span class="w"> </span>The<span class="w"> </span>default<span class="w"> </span>action<span class="w"> </span>is<span class="w"> </span>to<span class="w"> </span>keep<span class="w"> </span>your<span class="w"> </span>current<span class="w"> </span>version.
***<span class="w"> </span>rpt.conf<span class="w"> </span><span class="o">(</span>Y/I/N/O/D/Z<span class="o">)</span><span class="w"> </span><span class="o">[</span><span class="nv">default</span><span class="o">=</span>N<span class="o">]</span><span class="w"> </span>?<span class="w"> </span>N
</code></pre></div>
<p>AllStarLink will clearly announce when there is a change that may break
existing configurations.</p>
<p>If you want updates to install without any questions being asked
specify the <code>DEBIAN_FRONTEND=noninteractive</code> variable:</p>
<div class="highlight"><pre><span></span><code><span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>update
<span class="nv">DEBIAN_FRONTEND</span><span class="o">=</span>noninteractive<span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>upgrade<span class="w"> </span>-y
</code></pre></div>
<p>Using this command will automatically choose "N" to any 
question about configuration - i.e. it will always keep
your installed version.</p>
<h2 id="user-guide-updates-note-on-dahdi">Note on DAHDI</h2>
<p>In the past, managing the DAHDI kernel module needed
by app_rpt had been problematic during kernel upgrades.
Previously, the recommendation had been to never upgrade
the kernel. <strong>This advice is no longer valid and should not
be followed for security and practicality reasons.</strong></p>
<p>AllStarLink v3 automatically manages and rebuilds the
DAHDI kernel modules during software updates using
the DKMS system. After an upgrade, rebooting into a new version
of the Linux kernel will "Just Work".</p></section><section class="print-page" id="user-guide-known-issues-diffs"><h1 id="user-guide-known-issues-diffs-known-issues-differences-with-legacy-versions">Known Issues &amp; Differences With Legacy Versions</h1>
<p>As discussed in <a href="#user-guide-whats-new">What's New?</a>, AllStarLink v3 is
a gigantic leap forward in platform and software ecosystem. 
Many things are different in modern versions of Linux, Asterisk,
and more. This page documents permanent differences with ASL3
relative to legacy versions as well as any known issues that
must be fixed in ASL3.</p>
<h2 id="user-guide-known-issues-diffs-differences-with-legacy-versions">Differences with Legacy Versions</h2>
<h3 id="user-guide-known-issues-diffs-serial-ports-available-by-default">Serial Port(s) Available by Default</h3>
<p>On the ASL3 Pi Appliance, the system comes pre-configured
for <code>/dev/serial0</code> (formerly <code>/dev/ttyAMA0</code>) accessibility.
That means that Bluetooth and the default serial console
are disabled. Any directions requiring editing of <code>config.txt</code>
or <code>cmdline.txt</code> are unnecessary with the ASL3 appliance.</p>
<h3 id="user-guide-known-issues-diffs-pi-dev-entry-changes">Pi /dev Entry Changes</h3>
<p>As ASL3 is based on Debian 12, users with Raspberry Pi devices must
note that the serial port on the Pi header is now <code>/dev/serial0</code>
rather than the historical <code>/dev/ttyAMA0</code>. If you are following
directions for Pi serial port operations, such as programming an
SA818/DRA818-based radio hat or a SHARI node, use 
<code>/dev/serial0</code> in place of the <code>/dev/ttyAMA0</code> reference.</p>
<h3 id="user-guide-known-issues-diffs-voterrtcm-default-port">Voter/RTCM Default Port</h3>
<p>Modern installations of Asterisk runs as the unprivileged <code>asterisk</code> user rather than
as <code>root</code>. Standard Linux convention prohibits non-root users to listen on a TCP
port below 1024. The default port for Voters/RTCMs has been changed to <code>1667</code> when
previously it was <code>667</code>. If voter port changes are difficult
for the environment, see <a href="#adv-topics-incompatibles">Incompatible Changes in ASL3</a>
for other potential workarounds.</p>
<h2 id="user-guide-known-issues-diffs-known-issues">Known Issues</h2>
<p>The following issues are currently known to exist in AllStarLink 3 and,
where possible what the workarounds are.</p>
<h3 id="user-guide-known-issues-diffs-resize2fs_once-error">resize2fs_once "Error"</h3>
<p>There are intermittent cases of errors on the screen or in 
the system logs about a failure of a service named 
<code>resize2fs_once.service</code> after the final first boot upon
installation. The error may report that it
"Failed to start" or "timed out". If the <code>/</code> partition has
been properly resized - which has been the case in every known 
occurrence of the error - then there is no action to take
and the issue will not appear on subsequent reboots.</p>
<p>A properly resized <code>/</code> should be a bit smaller than the full
size of the SD card or USB drive used with the device.
In Cockpit, look at the Storage tab:</p>
<p><a class="glightbox" href="../user-guide/img/known_issue_resize2fs.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Known issue resize2fs" src="../user-guide/img/known_issue_resize2fs.png" width="600" /></a></p>
<p>In this example, <code>/</code> is a 31G partition on a 32G SD card.</p>
<h3 id="user-guide-known-issues-diffs-shutdownrestart-issues-with-ezstreambroadcastify-enabled">Shutdown/Restart Issues with EZStream/Broadcastify Enabled</h3>
<p>With the configuration for <a href="#adv-topics-broadcastify">Broadcastify</a> enabled,
shutting down or restarting Asterisk is not quick or always reliable. When
issuing <code>systemctl stop</code> or <code>systemctl restart</code> for the <code>asterisk.service</code> unit
it will take upwards of 90 seconds to properly terminate and exit/respawn.
Make sure any <code>lame</code> and <code>ezstream</code> processed are killed and not orphaned.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># ps auxww | grep asterisk</span>
asterisk<span class="w"> </span><span class="m">1443572</span><span class="w">  </span><span class="m">0</span>.0<span class="w">  </span><span class="m">0</span>.0<span class="w">   </span><span class="m">2416</span><span class="w">  </span><span class="m">1024</span><span class="w"> </span>?<span class="w">        </span>S<span class="w">    </span><span class="m">10</span>:13<span class="w">   </span><span class="m">0</span>:00<span class="w"> </span>/bin/sh<span class="w"> </span>-c<span class="w"> </span>/usr/bin/lame<span class="w"> </span>--preset<span class="w"> </span>cbr<span class="w"> </span><span class="m">16</span><span class="w"> </span>-r<span class="w"> </span>-m<span class="w"> </span>m<span class="w"> </span>-s<span class="w"> </span><span class="m">8</span><span class="w"> </span>--bitwidth<span class="w"> </span><span class="m">16</span><span class="w"> </span>-<span class="w"> </span>-<span class="w"> </span><span class="p">|</span><span class="w"> </span>/usr/bin/ezstream<span class="w"> </span>-qvc<span class="w"> </span>/etc/ezstream.xml
asterisk<span class="w"> </span><span class="m">1443573</span><span class="w">  </span><span class="m">0</span>.1<span class="w">  </span><span class="m">0</span>.1<span class="w">  </span><span class="m">11920</span><span class="w">  </span><span class="m">5120</span><span class="w"> </span>?<span class="w">        </span>S<span class="w">    </span><span class="m">10</span>:13<span class="w">   </span><span class="m">0</span>:00<span class="w"> </span>/usr/bin/lame<span class="w"> </span>--preset<span class="w"> </span>cbr<span class="w"> </span><span class="m">16</span><span class="w"> </span>-r<span class="w"> </span>-m<span class="w"> </span>m<span class="w"> </span>-s<span class="w"> </span><span class="m">8</span><span class="w"> </span>--bitwidth<span class="w"> </span><span class="m">16</span><span class="w"> </span>-<span class="w"> </span>-
asterisk<span class="w"> </span><span class="m">1443574</span><span class="w">  </span><span class="m">0</span>.0<span class="w">  </span><span class="m">0</span>.2<span class="w">  </span><span class="m">55232</span><span class="w"> </span><span class="m">10240</span><span class="w"> </span>?<span class="w">        </span>S<span class="w">    </span><span class="m">10</span>:13<span class="w">   </span><span class="m">0</span>:00<span class="w"> </span>/usr/bin/ezstream<span class="w"> </span>-qvc<span class="w"> </span>/etc/ezstream.xml
</code></pre></div>
<p>If Asterisk is shutdown, the processes above must be stopped with a <code>kill -9 PID</code> command.</p></section><section class="print-page" id="user-guide-passwords"><h1 id="user-guide-passwords-logins-and-passwords">Logins and Passwords</h1>
<p>Yes, there are many "different" logins and passwords associated with AllStarLink, the ASL3 software, and the related applications.  A typical ASL3 server / node will directly or indirectly use the following login/password pairs :</p>
<ul>
<li>AllStarLink login (for "node" information)</li>
<li>Linux login</li>
<li>AMI user/secret</li>
<li>Web application (Allmon3) login</li>
</ul>
<h2 id="user-guide-passwords-allstarlink-website-wwwallstarlinkorg">AllStarLink website (<a href="https://www.allstarlink.org">www.allstarlink.org</a>)</h2>
<p>Th AllStarLink website is where you register for an AllStarLink account, add ASL servers, and request ASL nodes.</p>
<ul>
<li>
<p>Your AllStarLink account with have a "login" and "password"</p>
</li>
<li>
<p>Using the AllStarLink website's "Portal" menu you can:</p>
<ul>
<li>
<p>Add/configure "servers" (computers) that will be running the ASL software.  Each "server" specifies the IAX port used to communicate with your node.  Most nodes will use the default port (4569).  The most common reason to specify an alternate port would be configuring multiple servers that would be running behind a NAT router (e.g. when the servers would be sharing the same public IP).</p>
</li>
<li>
<p>Add/configure "nodes" that will be running on a server.  Each ASL "node" will have an associated password.  You will use the node number and password pair when configuring your ASL node.</p>
</li>
</ul>
</li>
<li>
<p>Some desktop and mobile applications use "Web Transceiver" to connect to AllStarLink nodes.  Many of these applications use your AllStarLink website login and password for authentication.</p>
</li>
</ul>
<h2 id="user-guide-passwords-linux">Linux</h2>
<p>Your desktop, laptop, Raspberry Pi, or Virtual Machine will be running the Linux operating system (e.g. Debian).  To access the operating system on your OS you will need a login "user" and "password".</p>
<p>You will use the Linux "user" and "password" when logging in to your system :</p>
<ul>
<li>with the systems display / keyboard</li>
<li>over the network using SSH</li>
<li>over the network using the Cockpit web page</li>
</ul>
<p>You may have heard about the Linux "root" account.  The root account is also called the super-user; it is a login that bypasses all security protection on your system.  The root account should only be used to perform system administration, and only used for as short a time as possible.  With ASL3, we are trying to limit our usage of the "root" account.</p>
<!---
How do I setup a Linux login?

- For those using the Raspberry Pi Imager you will use the "OS Customisation" to setup a new login account.  Here, you will specify your login "user" and "password" (or provide an SSH public key for password-less access)

- For those installing the Debian OS using the install .iso you should be prompted to setup an initial account.  This is where you will specify your login "user" and "password".

- Some VM's will have you use a pre-configured image with a default "user" and "password".  Check the documentation associated with the image for details.
--->

<p>Note: there is NO DEFAULT USER included in the ASL3 Raspberry Pi Appliance image.</p>
<h2 id="user-guide-passwords-asterisk-manager-interface-ami">Asterisk Manager Interface (AMI)</h2>
<p>Your AllStarLink server system runs as process named "asterisk" that is the heart of your node(s).  The Asterisk Manager Interface, AMI, is the standard management interface into your Asterisk server.</p>
<p>The AMI configuration, stored in "/etc/asterisk/manager.conf", includes "user" categories and associated "secret" passwords.  For example :</p>
<div class="highlight"><pre><span></span><code>[admin]
secret = my-AMI-password
...
</code></pre></div>
<p>This "user" (admin) and "secret" (my-AMI-password) would need to be specified in the configuration file for any applications that use AMI to interact with Asterisk.</p>
<h2 id="user-guide-passwords-web-applications-eg-allmon3">Web Applications (e.g. Allmon3)</h2>
<p>Many will install one (or more) web applications that monitor/control their ASL nodes.  These applications can provide access to many users on the web and those users may have no relation to those who setup/administer/use your systems.  As such, these applications typically maintain their own list of users and associated passwords.</p>
<p>Please refer to the web application manual for information on how to manage who is allowed access to the web pages.</p>
<p>Also, as mentioned above, many of these applications use AMI to interact with your Asterisk and your nodes.  The web application manual should have information on where to specify the AMI credentials.</p></section><section class="print-page" id="user-guide-support"><h1 id="user-guide-support-asl3-support">ASL3 Support</h1>
<h2 id="user-guide-support-support">Support</h2>
<p>Primary support for all versions of ASL (including ASL3) continues to be the <a href="https://community.allstarlink.org/">AllStarLink Community</a>.
Please do not use the ASL Helpdesk for technical help.
Support for ASL3 will NOT be handled by the ASL Helpdesk.
All Helpdesk tickets will be closed with a referral to the <a href="https://community.allstarlink.org/">AllStarLink Community</a> or GitHub.</p>
<h2 id="user-guide-support-bug-reporting">Bug Reporting</h2>
<p>Bug reports for ASL3 and surrounding issues are best handled through GitHub "Issues" to the source code projects at <a href="https://github.com/AllStarLink">AllStarLink GitHub</a>.
There are numerous ASL3 repositories. If you're not sure which repository to use for reporting a given issue then start at <a href="https://github.com/AllStarLink/ASL3">ASL3</a>.
You can also ask for guidance in the <a href="https://community.allstarlink.org/">AllStarLink Community</a>.</p>
<p>When reporting an issue we ask that you be comfortable enough with Linux to edit files, restart services, and perhaps copy a potentially fixed file onto your system.</p>
<p>Note: to raise issues about ASL3 problems and interact with the developers you must create (or use an existing) GitHub account.</p>
<h2 id="user-guide-support-enhancement-requests">Enhancement Requests</h2>
<p>Obviously, we cannot promise anything but we do want to hear your ideas.  Please file a GitHub "Issue" :-)</p>
<h2 id="user-guide-support-contributing">Contributing</h2>
<p>Have you identified a problem and have a solution?  We welcome your help.  Please file a GitHub issue with all the details.  Even better, create a GitHub "Pull request" for us to review.</p></section><section class="print-page" id="user-guide-betatest"><h1 id="user-guide-betatest-beta-testing">Beta Testing</h1>
<p>Beta testing is the final phase of software testing before
releasing a product to the general public. During this
stage, a group of users representing the target audience
validates the product. They explore its features, uncover bugs,
and provide feedback.</p>
<p>AllStarLink releases software packages to a beta channel on a periodic
basis to address bug fixes and feature enhancements. The beta
channel of packages is available to all users. However, please
only select to run packages from the beta channel if you meet the
following criteria:</p>
<ol>
<li>
<p>If something goes wrong, your can easily recover your node 
from backups or other saved configuration.</p>
</li>
<li>
<p>You have generalized Linux skills such as understanding
basic commands, ability to use the shell terminal of Linux,
ability to copy/paste output data into bug reports, etc.</p>
</li>
<li>
<p>You acknowledge that a beta release may have other bugs,
incomplete fixes, or may in rare cases not work right at all
<em>for your configuration</em> and that you can live with this.</p>
</li>
<li>
<p>You may need to edit configuration files to fix issues
or test things or to roll back to previous versions of
software.</p>
</li>
</ol>
<p>If you cannot adhere to the above four conditions, you should
not use the beta channel software.</p>
<h2 id="user-guide-betatest-enabling-beta-channel-software">Enabling Beta Channel Software</h2>
<p>Enabling beta channel software is done with the <code>asl-repo-switch</code>
command as root. Set the channel to "beta" using
<code>asl-repo-switch -l beta</code>. For example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># asl-repo-switch -l beta</span>
Setting<span class="w"> </span>level<span class="w"> </span>beta...<span class="w"> </span>DONE
Run<span class="w"> </span><span class="s1">&#39;apt update&#39;</span><span class="w"> </span>to<span class="w"> </span>refresh<span class="w"> </span>the<span class="w"> </span>package<span class="w"> </span>repo<span class="w"> </span>cache.
</code></pre></div>
<h2 id="user-guide-betatest-disabling-beta-channel-software">Disabling Beta Channel Software</h2>
<p>Disabling beta channel software is done with the <code>asl-repo-switch</code>
command as root. Set the channel to "main" using <code>asl-repo-switch -l main</code>.
For example:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># asl-repo-switch -l main</span>
Setting<span class="w"> </span>level<span class="w"> </span>main...<span class="w"> </span>DONE
Run<span class="w"> </span><span class="s1">&#39;apt update&#39;</span><span class="w"> </span>to<span class="w"> </span>refresh<span class="w"> </span>the<span class="w"> </span>package<span class="w"> </span>repo<span class="w"> </span>cache.
</code></pre></div>
<h2 id="user-guide-betatest-installing-updates-using-beta-channel">Installing Updates Using Beta Channel</h2>
<p>The most common case to use the beta channel for software packages
is to test a proposed fix to a problem you are having. In those
cases, the following commands should be run <strong>one at a time</strong>
from a terminal/console as root (using sudo or sudo -s):</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>asl-repo-switch<span class="w"> </span>-l<span class="w"> </span>beta
sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>upgrade<span class="w"> </span>-y
sudo<span class="w"> </span>asl-repo-switch<span class="w"> </span>-l<span class="w"> </span>main
</code></pre></div>
<p>This will do a one-time installation of the packages in the beta
channel and then switch back to main.</p>
<h2 id="user-guide-betatest-resetting-installation-of-asl-back-to-production">Resetting Installation of ASL Back to Production</h2>
<p>To reset your packages for ASL3 back to the production-release
main versions:</p>
<p>For Pi Appliances:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>asl-repo-switch<span class="w"> </span>-r
sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--reinstall<span class="w"> </span>asl3<span class="w"> </span>asl3-asterisk<span class="w"> </span>asl3-asterisk-config<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>asl3-asterisk-modules<span class="w"> </span>asl3-menu<span class="w"> </span>asl3-update-nodelist<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>asl3-pi-appliance<span class="w"> </span>allmon3
</code></pre></div></p>
<p>For Debian 12 general installations:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>asl-repo-switch<span class="w"> </span>-r
sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--reinstall<span class="w"> </span>asl3<span class="w"> </span>asl3-asterisk<span class="w"> </span>asl3-asterisk-config<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>asl3-asterisk-modules<span class="w"> </span>asl3-menu<span class="w"> </span>asl3-update-nodelist
</code></pre></div></p>
<p>For DAHDI Kernel packages after doing the above, as necessary:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>--reinstall<span class="w"> </span>dahdi-linux<span class="w"> </span>dahdi-dkms
</code></pre></div></p>
<p>Note that you may need to merge or fix configurations when rolling
back from beta software to production. This is unusual 
but possible.</p></section><section class="print-page" id="user-guide-troubleshooting"><h1 id="user-guide-troubleshooting-basic-troubleshooting-tips">Basic Troubleshooting Tips</h1>
<p>When asking for help on <a href="https://community.allstarlink.org">AllStarLink Community</a> or
in a GitHub Issue here are some tips on how to ask for help and how to get common
troubleshooting information that is often needed to understand your specific
issues.</p>
<h2 id="user-guide-troubleshooting-tips-on-asking-for-help">Tips on Asking for Help</h2>
<p>Keep in mind that when asking for help, the pool of people likely able to help
have no understanding of your personal setup, situation, skills, etc. In order
to get good help, you need to ask a good question. Make sure when asking for
help that you hit the following points:</p>
<h4 id="user-guide-troubleshooting-explain-precisely-what-is-not-working-properly">Explain <strong>Precisely</strong> What is not Working Properly</h4>
<p>Requests for help such as "ASL doesn't work" or "my pi crashes" or
"I can't do X" without any further details or information is unable to be
diagnosed and assisted.</p>
<p>Examples of <strong>GOOD</strong> ways to ask a question:</p>
<ul>
<li>
<p>I just built a new ASL3 Pi and when I try to connect to the interface
I get <strong>this particular</strong> error.</p>
</li>
<li>
<p>After I configured my node, I am trying to do <strong>this particular thing</strong>
and it doesn't work because of <strong>this particular error</strong>.</p>
</li>
<li>
<p>I am trying to configure <strong>this particular feature</strong> in <code>rpt.conf</code> and
when I do, <strong>this particular thing</strong> happens.</p>
</li>
<li>
<p>I used to be able to do <strong>this thing</strong> and after I change <strong>this other thing</strong>
then <strong>this thing</strong> stopped working.</p>
</li>
</ul>
<p>Basically, before submitting your question to Community, make sure your post
contains the basics of "What am I trying to do", "what do I think should be
happening", and "What is happening instead". If you are filing an issue on
GitHub, use the Issue Templates - they ask for information for a reason.</p>
<h4 id="user-guide-troubleshooting-be-ready-to-provide-requested-basic-troubleshooting-info">Be Ready to Provide Requested Basic Troubleshooting Info</h4>
<p>If you are going to ask for help, be ready and willing to provide the basic
troubleshooting information that is requested. For example, if you're having
a problem linking to another node, be ready to provide - or even better
provide in advance - the basic troubleshooting information needed to help
with your problem.</p>
<p>Items that may be requested include elements such as:</p>
<ul>
<li>
<p>How is your node connected to the Internet?</p>
</li>
<li>
<p>What IAX2 port is configured?</p>
</li>
<li>
<p>What client are you using?</p>
</li>
<li>
<p>What radio type are you using?</p>
</li>
<li>
<p>What is your IP address?</p>
</li>
<li>
<p>Is the time correct on your system?</p>
</li>
<li>
<p>Can you put a monitor on the device and tell what the screen says</p>
</li>
<li>
<p>What did the log say about...?</p>
</li>
</ul>
<h4 id="user-guide-troubleshooting-allstarlink-does-not-support-certain-other-projectstools">AllStarLink Does Not Support Certain Other Projects/Tools</h4>
<p>Core AllStarLink does not support certain other projects/tools such as
HamVOIP, Supermon/Supermon2, SkyWarnPlus, or AllScan. Some of the
developers of these tools such as SkyWarnPlus and AllScan
are active and answer questions on the Community and others are not.
If you are told, "that isn't supported but have you tried doing it in 
this supported way", consider giving it a try. </p>
<h4 id="user-guide-troubleshooting-allstarlink-v3-contains-14-years-of-changes">AllStarLink v3 Contains 14+ Years of Changes</h4>
<p>The release of AllStarLink v3 uses modern Asterisk 20 LTS. Legacy
installs use Asterisk 1.4 with was end of life in 2012. Thus, there
are literally 14+ years of changes of how Asterisk operates that
app_rpt (the main engine behind ASL) had to conform to. Notably,
the configuration syntax which changed gradually for time for users
staying current with Asterisk is an "all of a sudden" change
in ASL3. One cannot paste old configuration into modern ASL3 and have
it "just work".</p>
<p>Additionally, Asterisk no longer runs as the root user on Linux which
means that its ability to do things to the system such as make OS
changes is purposefully restricted. ASL3 and Asterisk are very security
conscious as many of our users run ASL3 systems on the open Internet.</p>
<h4 id="user-guide-troubleshooting-give-questioners-the-benefit-of-the-doubt">Give Questioners the Benefit of the Doubt</h4>
<p>In general, if people are asking questions about the details of your problem,
they are likely trying to help and not nitpick. In general, if many people
are having the problem. it is already known and <a href="#user-guide-known-issues-diffs">likely documented</a>.
If it's not, then likely your issue is unique to your setup and
providing the requested troubleshooting is needed to  help.</p>
<h2 id="user-guide-troubleshooting-basic-troubleshooting">Basic Troubleshooting</h2>
<h3 id="user-guide-troubleshooting-gathering-logs">Gathering Logs</h3>
<p>If you are asked to provide logs, there are two standard ways to provide
logs - using Cockput and using the <code>journalctl</code> tool from the 
command line.</p>
<h4 id="user-guide-troubleshooting-gathering-logs-with-cockpit">Gathering Logs with Cockpit</h4>
<p>In the <a href="#pi-cockpit-basics">Cockpit interface</a>, navigate
to <strong>Services</strong> on the left navbar and click. The service
list will display. Wait for the full list to load and then click
on the blue link name of the service. The common services are:</p>
<ul>
<li>
<p>allmon3 - Allmon 3</p>
</li>
<li>
<p>asl3-update-astdb - Maintenance of the astdb.txt file used by third-party apps</p>
</li>
<li>
<p>asl3-update-nodelinst - Maintenance of the "file" based lookup database</p>
</li>
<li>
<p>asterisk - Core Asterisk/App_Rpt</p>
</li>
<li>
<p>networking - Information about network interfaces</p>
</li>
<li>
<p>NetworkManager - Information about network items of all sorts</p>
</li>
<li>
<p>systemd-timesyncd - Information about time sync</p>
</li>
</ul>
<p>After clicking on one of the links wait until <strong>Service logs</strong> fills in
and then view the logs. Clicking <strong>View all logs</strong> will show more logs.</p>
<h4 id="user-guide-troubleshooting-gathering-logs-with-clissh">Gathering Logs with CLI/SSH</h4>
<p>Use the <code>journalctl -xeu</code> command to provide logging output. For example:</p>
<div class="highlight"><pre><span></span><code>journalctl -xeu asterisk.service
</code></pre></div>
<p>Common services are:
* allmon3.service - Allmon 3</p>
<ul>
<li>
<p>asl3-update-astdb.service - Maintenance of the astdb.txt file used by third-party apps</p>
</li>
<li>
<p>asl3-update-nodelinst.service - Maintenance of the "file" based lookup database</p>
</li>
<li>
<p>asterisk.service - Core Asterisk/App_Rpt</p>
</li>
<li>
<p>networking.service - Information about network interfaces</p>
</li>
<li>
<p>NetworkManager.service - Information about network items of all sorts</p>
</li>
<li>
<p>systemd-timesyncd.service - Information about time sync</p>
</li>
</ul>
<h3 id="user-guide-troubleshooting-gathering-configs">Gathering Configs</h3>
<p>It is often needed to gather certain configuration details. Use the
<a href="#pi-cockpit-console">Cockpit Console</a> or the SSH/CLI
interface. People asking for information will likely provide the file needed in
the request. However here are some easy ways to get the data requested:</p>
<ul>
<li>
<p><code>tail -n50 FILE</code> - Print the last 50 lines of <code>FILE</code></p>
</li>
<li>
<p><code>tail -F FILE</code> - Print the output of <code>FILE</code> as it is written to (useful for watching logs
live). Press Ctrl+c to exit.</p>
</li>
<li>
<p><code>more FILE</code> - Print <code>FILE</code> by pages</p>
</li>
<li>
<p><code>less FILE</code> - Less is more than more... Less is an interactive scroller and searching
interface. For example typing <code>/SOMETHING</code> will search for the string "Something" 
forward from where you are in the file and <code>?SOMETHING</code> will search backwards. Enter
CTRL+c to exit.</p>
</li>
<li>
<p><code>grep SOMETHING FILE</code> - This is basic searching for a file. For example, you can use
<code>grep</code> to answer the question "what does the line with FOO in FILE say?". This command
would be rung <code>grep FOO FILE</code>.</p>
</li>
</ul>
<p>When possible, please copy/paste text and not screenchots into systems for
troubleshooting. Text is far easier to deal with.</p></section><h1 class='nav-section-title-end'>Ended: User Guide</h1>
                        <h1 class='nav-section-title' id='section-pi-appliance'>
                            Pi Appliance <a class='headerlink' href='#section-pi-appliance' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="pi"><h1 id="pi-pi-appliance">Pi Appliance</h1>
<p>AllStarLink 3 features a modern appliance of AllStarLink
while retaining the ubiquitous Raspberry Pi experience
that's well-documented and familiar to the amateur radio
community worldwide.</p>
<h2 id="pi-cockpit-web-admin-interface">Cockpit Web Admin Interface</h2>
<p>The AllStarLink Pi Appliance includes the user-friendly
Cockpit system for ease of administration. Cockpit
is access on port 9090 of the appliance. In these examples
the hostname <code>node63001</code> is used and should be replaced
with the name you set during setup. If the name
<code>node63001</code> was used at setup, then pointing a
browser to <code>https://node63001.local:9090/</code> will bring up
the Cockpit interface. Note: The hostname only works
when your node and your PC are on the same LAN. Otherwise
use the IP or dns name you assign. Login is the username
and password that was setup during the Pi imaging process.</p>
<p>The first connection will report a message that
"Your connection isn't private". For the Pi appliance, this is
acceptable. Click on <strong>Advanced</strong> and then
<strong>Continue to node63001.local (unsafe)</strong>. This only must be done
the first time.
<a class="glightbox" href="../user-guide/img/step-20.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Browser Warning" src="../user-guide/img/step-20.png" /></a></p>
<p>Enter the username and password configured during the imaging process
above. Click <strong>Log in</strong>
<a class="glightbox" href="../user-guide/img/step-22.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Cockpit Login" src="../user-guide/img/step-22.png" /></a></p>
<p>Cockpit is fairly intuitive to use, but here's are a few
pointers to help get started:</p>
<ul>
<li><a href="#pi-cockpit-basics">Cockpit Basics</a></li>
<li><a href="#pi-cockpit-console">Terminal / Console</a></li>
<li><a href="#pi-cockpit-network">Network Configuration</a></li>
<li><a href="#pi-cockpit-services">Services Management</a></li>
<li><a href="#pi-cockpit-updates">Software Updates</a></li>
</ul></section><section class="print-page" id="pi-cockpit-basics"><h1 id="pi-cockpit-basics-cockpit-basics">Cockpit Basics</h1>
<p>The Cockpit web console is a web-based graphical interface
By using it, you can perform system administration tasks,
such as inspecting and controlling services, managing storage,
configuring networks, analyzing network issues, and inspecting logs. 
Of course, it's also very handy for administering Asterisk on
your AllStarLink Pi Appliance!</p>
<h1 id="pi-cockpit-basics-what-is-the-cockpit-console">What is the Cockpit Console</h1>
<p>What is the Cockpit Console</p>
<p>The Cockpit Console is a web-based interface designed for managing and monitoring your
AllStarLink Pi Appliance.</p>
<p>The Cockpit Console enables you to perform a wide range of administration tasks, including:</p>
<pre><code>Managing AllStarLink, Asterisk, and its related applications
Managing services
Managing user accounts
Managing and monitoring system services
Configuring network interfaces
Reviewing system logs
Updating software
</code></pre>
<p>The Cockpit Console uses the same system concepts as you would use in a
terminal, and actions performed in a terminal are immediately reflected
in the Cockpit Console. That is to say, you can use Cockpit and
an SSH connection interchangeably at your desire.</p>
<p>You can monitor the logs of application. In addition, you can change the
settings directly in the web console or through the terminal. </p>
<p>Throughout this documentation a host named <code>node63001.local</code> is used as
the example host. Substitute that name with your own node's name as it 
was set during the imaging process.</p>
<h1 id="pi-cockpit-basics-logging-in-to-the-web-console">Logging In to the Web Console</h1>
<ol>
<li>
<p>In your web browser, enter the following address to access the web console:
    https://node63001.local:9090</p>
</li>
<li>
<p>The browser may display a warning. Accept the security exception to
proceed with the login.
<a class="glightbox" href="../user-guide/img/step-20.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Login" src="../user-guide/img/step-20.png" /></a></p>
</li>
<li>
<p>Enter the username and password set during the imaging process.
<a class="glightbox" href="../user-guide/img/step-22.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Login" src="../user-guide/img/step-22.png" /></a></p>
</li>
<li>
<p>Click <strong>Log In</strong>. </p>
</li>
</ol>
<h1 id="pi-cockpit-basics-administrative-access">Administrative Access</h1>
<p>The Web Console has a concept of Administrative access. While it does
remember the access level across logins, to access certain functions
you may need to enable Administrative access from Limited access.
Do do that:</p>
<ol>
<li>
<p>Click on the bar marked <strong>Limited Access</strong> to enable admin-level
access.
<a class="glightbox" href="../pi/img/limited_access-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Limited Access" src="../pi/img/limited_access-1.png" /></a></p>
<p>You may be prompted to tnter the password again. Do 
so and then click <strong>Authenticate</strong>
<a class="glightbox" href="../pi/img/limited_access-2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Step 23B" src="../pi/img/limited_access-2.png" /></a></p>
</li>
<li>
<p>Click <strong>Close</strong> on the box reporting administrative
access has been granted.</p>
</li>
</ol>
<h1 id="pi-cockpit-basics-shutting-down-the-appliance">Shutting Down the Appliance</h1>
<p>You can use the web console to shut down the system.</p>
<ol>
<li>
<p>Log into the Web Console.</p>
</li>
<li>
<p>(optional) Click on the bar marked <strong>Limited Access</strong> to enable admin-level
access.
<a class="glightbox" href="../pi/img/limited_access-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Limited Access" src="../pi/img/limited_access-1.png" /></a></p>
</li>
<li>
<p>(optional) Click <strong>Close</strong> on the box reporting administrative
access has been granted.</p>
</li>
<li>
<p>Click on the downward arrow next to Reboot and then
select <strong>Shutdown</strong>
<a class="glightbox" href="../pi/img/cockpit_shutdown.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Shutdown" src="../pi/img/cockpit_shutdown.png" /></a></p>
</li>
<li>
<p>Change the <strong>Delay</strong> dropdown to <strong>No delay</strong> and click <strong>Shut down</strong>
<a class="glightbox" href="../pi/img/cockpit_shutdown2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Shutdown2" src="../pi/img/cockpit_shutdown2.png" /></a></p>
</li>
<li>
<p>A <strong>Disconnected</strong> message will appear. The node will shutdown
is about 15-30 seconds, after which power may be removed.</p>
</li>
</ol>
<h1 id="pi-cockpit-basics-rebooting-the-appliance">Rebooting the Appliance</h1>
<ol>
<li>
<p>Log into the Web Console.</p>
</li>
<li>
<p>(optional) Click on the bar marked <strong>Limited Access</strong> to enable admin-level
access.
<a class="glightbox" href="../pi/img/limited_access-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Limited Access" src="../pi/img/limited_access-1.png" /></a></p>
</li>
<li>
<p>(optional) Click <strong>Close</strong> on the box reporting administrative
access has been granted.</p>
</li>
<li>
<p>Click on Reboot
<a class="glightbox" href="../pi/img/cockpit_reboot.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Shutdown" src="../pi/img/cockpit_reboot.png" /></a></p>
</li>
<li>
<p>Change the <strong>Delay</strong> dropdown to <strong>No delay</strong> and click <strong>Reboot</strong>
<a class="glightbox" href="../pi/img/cockpit_reboot2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Shutdown2" src="../pi/img/cockpit_reboot2.png" /></a></p>
</li>
<li>
<p>A <strong>Disconnected</strong> message will appear. The node will reboot and
be available again in about 15-30 seconds. After that, one can click
<strong>Reconnect</strong>.</p>
</li>
</ol>
<h1 id="pi-cockpit-basics-configuring-time-on-the-appliance">Configuring Time on the Appliance</h1>
<p>In general, the appliance should be left in the default setting of using
the NTP service to automatically set the time. However you may want
to change the Timezone. To change the time:</p>
<ol>
<li>
<p>Log into the Web Console.</p>
</li>
<li>
<p>(optional) Click on the bar marked <strong>Limited Access</strong> to enable admin-level
access.
<a class="glightbox" href="../pi/img/limited_access-1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Limited Access" src="../pi/img/limited_access-1.png" /></a></p>
</li>
<li>
<p>(optional) Click <strong>Close</strong> on the box reporting administrative
access has been granted.</p>
</li>
<li>
<p>Click on Overview and scroll down to <strong>Configuration</strong></p>
</li>
<li>
<p>Click on highlighted time next to <strong>System time</strong></p>
</li>
<li>
<p>Change the <strong>Time zone</strong> drop-down to the desired zone.</p>
</li>
<li>
<p>Click <strong>Change</strong>.</p>
</li>
</ol>
<hr />
<p>Note: Some content copied from 
<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/index"><strong>Managing systems using the RHEL9 web console</strong></a>
which is released under the Creative Commons Attribution–Share Alike 3.0
Unported license ("CC-BY-SA")</p></section><section class="print-page" id="pi-cockpit-console"><h1 id="pi-cockpit-console-terminal-console">Terminal / Console</h1>
<p>The Cockpit Web Console provides a feature-complete
terminal interface in the web browser without requiring
setup and configuration of an SSH client. This allows
administration of the node from anywhere!</p>
<p>Use of the web console Terminal and an SSH client is
fully interactive and interchangeable.</p>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click <strong>Terminal</strong> in the web console menu on the left.</p>
</li>
<li>
<p>You will be connected to a terminal of the user that
you logged in with.
<a class="glightbox" href="../pi/img/cockpit_terminal_user.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Terminal User" src="../pi/img/cockpit_terminal_user.png" /></a></p>
</li>
<li>
<p>To execute commands as root, either prefix the command
with <code>sudo</code>:
<a class="glightbox" href="../pi/img/cockpit_terminal_sudo.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Terminal User" src="../pi/img/cockpit_terminal_sudo.png" /></a></p>
</li>
<li>
<p>One can enter a root session completely by issueing
the command <code>sudo -s</code>:
<a class="glightbox" href="../pi/img/cockpit_terminal_sudo-s.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Terminal User" src="../pi/img/cockpit_terminal_sudo-s.png" /></a></p>
</li>
</ol>
<hr />
<p>Note: Some content copied from 
<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/index"><strong>Managing systems using the RHEL9 web console</strong></a>
which is released under the Creative Commons Attribution–Share Alike 3.0
Unported license ("CC-BY-SA")</p></section><section class="print-page" id="pi-cockpit-network"><h1 id="pi-cockpit-network-network-configuration">Network Configuration</h1>
<p>The Networking system tool in the web console permits viewing the status
of the network as well as making network configuration changes to the appliance.</p>
<h1 id="pi-cockpit-network-observing-network-status-and-configuration">Observing Network Status and Configuration</h1>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click <strong>Networking</strong> in the web console menu on the left.</p>
</li>
<li>
<p>At the top of the screen will be the network data statistics
for transmitted and receiving network traffic. This information
can be helpful if there are questions about network bandwidth
utilization:
<a class="glightbox" href="../pi/img/cockpit_network_utilize.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Network utilization" src="../pi/img/cockpit_network_utilize.png" /></a></p>
</li>
<li>
<p>The next panel down shows the current configuration of the 
present network adapters:
<a class="glightbox" href="../pi/img/cockpit_network_adapters.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Adapter configuration" src="../pi/img/cockpit_network_adapters.png" /></a></p>
</li>
<li>
<p>Finally, at the bottom is the logs about the current
state of the network:
<a class="glightbox" href="../pi/img/cockpit_network_logs.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Adapter configuration" src="../pi/img/cockpit_network_logs.png" /></a></p>
</li>
</ol>
<h1 id="pi-cockpit-network-changing-adapter-setting">Changing Adapter Setting</h1>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click <strong>Networking</strong> in the web console menu on the left.</p>
</li>
<li>
<p>Scroll down to the <strong>Interfaces</strong> section</p>
</li>
<li>
<p>Click on the <strong>Name</strong> of the interface</p>
</li>
<li>
<p>Make desired changes</p>
</li>
<li>
<p>Changes take place immediately. Be cautious when changing
IP addressing because you may accidentally remove your ability
to access to the console.</p>
</li>
</ol>
<h1 id="pi-cockpit-network-changing-wifi-settings">Changing WiFi Settings</h1>
<p>Unfortunately, Cockpit does not have an interface for managing WiFi networks
with in it. Currently WiFi network changes must be made from the Web Console
Terminal screen.</p>
<h2 id="pi-cockpit-network-listing-existing-wifi-networks">Listing Existing WiFi Networks</h2>
<p>List the existing WiFi network(s) with <code>nmcli device wifi list</code>:</p>
<p><a class="glightbox" href="../pi/img/cockpit_wifi1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Display Wifi" src="../pi/img/cockpit_wifi1.png" /></a></p>
<h2 id="pi-cockpit-network-add-a-wifi-network">Add a WiFi Network</h2>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click <strong>Terminal</strong> in the web console menu on the left.</p>
</li>
<li>
<p>At the prompt enter the command:</p>
<div class="highlight"><pre><span></span><code>nmcli device wifi connect MYNETWORK password MYPASSWORD
</code></pre></div>
<p>where <code>MYNETWORK</code> is the name ("SSID") and <code>MYPASSWORD</code> is the password ("Key").
To join the network "RadioSite" with the password "RF1234":</p>
<div class="highlight"><pre><span></span><code>nmcli device wifi connect RadioSite password RF1234
</code></pre></div>
<p>If there is a space in the name or password, you must use quotes around the
element with the space in it.</p>
</li>
<li>
<p>If the network is not currently active (i.e. adding a network where the appliance
will be in the future) or the SSID is hidden, adding is slightly more complicated.
Again, substitute <code>MYNETWORK</code> and <code>MYPASSWORD</code> with as appropriate.</p>
<div class="highlight"><pre><span></span><code>nmcli conn add type wifi con-name MYNETWORK ifname wlan0 ssid MYPASSWORD
nmcli conn modify MYNETWORK wifi-sec.key-mgmt wpa-psk wifi-sec.psk MYPASSWORD
</code></pre></div>
</li>
</ol>
<p>Note: DO NOT use the <code>raspi-config</code> tool to attempt to set the Wifi network and
password. This will break the appliance's networking.</p>
<hr />
<p>Note: Some content copied from 
<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/index"><strong>Managing systems using the RHEL9 web console</strong></a>
which is released under the Creative Commons Attribution–Share Alike 3.0
Unported license ("CC-BY-SA")</p></section><section class="print-page" id="pi-cockpit-updates"><h1 id="pi-cockpit-updates-software-updates">Software Updates</h1>
<p>The Software updates tool in the web console is how to
install package updates to the AlLStarLink Pi appliance.
This includes updating AllStarLink software and its associated
items.</p>
<h1 id="pi-cockpit-updates-checking-for-and-installing-updates">Checking For and Installing Updates</h1>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click <strong>Software Updates</strong> in the web console menu on the left.</p>
</li>
<li>
<p>Click on the cycle icon in the upper right of the panel.
<a class="glightbox" href="../pi/img/cockpit_softups1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Software updates 1" src="../pi/img/cockpit_softups1.png" /></a></p>
</li>
<li>
<p>Available updates will be displayed. Click on <strong>Install all updates</strong>
<a class="glightbox" href="../pi/img/cockpit_softups2.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Software updates 2" src="../pi/img/cockpit_softups2.png" /></a></p>
</li>
<li>
<p>The updates will start. Depending on the quantity of updates, the 
speed of the Pi hardware, and how long certain installs take, this may take
quite awhile to copmlete. For example, if there is a Linux kernel update,
then the Dahdi package will be recompiled for the new kernel which can take
up to 10 minutes. Be patient while updates run. You can observe the updates
by clicking on <strong>View update log</strong>.
<a class="glightbox" href="../pi/img/cockpit_softups3.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Software updates 2" src="../pi/img/cockpit_softups3.png" /></a></p>
</li>
<li>
<p>When the updates are complete, you will be prompted to reboot the system.
In general, it is advised to reboot the system after updates, however that is
not necessarily required for most updates. Kernel updates and Dahdi updates
DO require a reboot.
<a class="glightbox" href="../pi/img/cockpit_softups4.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Software updates 2" src="../pi/img/cockpit_softups4.png" /></a></p>
</li>
<li>
<p>After the updates are completed, returning to the <strong>Software Updates</strong>
screen should show that the software is up to date.
<a class="glightbox" href="../pi/img/cockpit_softups5.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Software updates 2" src="../pi/img/cockpit_softups5.png" /></a></p>
</li>
</ol></section><section class="print-page" id="pi-cockpit-services"><h1 id="pi-cockpit-services-services-management">Services Management</h1>
<p>The Cockpit Web Console allows the management of all of the
running services. You can activate or deactivate services,
restart or reload them, or manage their automatic startup.</p>
<h1 id="pi-cockpit-services-start-stop-and-restart-services">Start, Stop, and Restart Services</h1>
<p>This procedure stops or starts system services using the web console interface.
You can filter the services by name or description and also by
Enabled, Disabled, or Static automatic startup. The interface shows the
current state of the service and its recent logs.</p>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click Services in the web console menu on the left. The default
tab for Services is System Services. If you want to manage targets,
sockets, timers, or paths, switch to the respective tab in the menu on top.
To open service settings, click on a selected service from the list.
You can tell which services are active or inactive by checking the State column.</p>
</li>
<li>
<p>To start an inactive service, click the Start button.
<a class="glightbox" href="../pi/img/cockpit_service_start.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Service Enable" src="../pi/img/cockpit_service_start.png" /></a></p>
</li>
<li>
<p>To deactivate an active service, click the Stop button
<a class="glightbox" href="../pi/img/cockpit_service_stop.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Service Enable" src="../pi/img/cockpit_service_stop.png" /></a></p>
</li>
<li>
<p>To restart a service, click the Restart button
<a class="glightbox" href="../pi/img/cockpit_service_restart.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Service Enable" src="../pi/img/cockpit_service_restart.png" /></a></p>
</li>
</ol>
<h1 id="pi-cockpit-services-seeing-status-and-recent-logs-of-a-service">Seeing Status and Recent Logs of a Service</h1>
<p>This procedure stops or starts system services using the web console interface.
You can filter the services by name or description and also by
Enabled, Disabled, or Static automatic startup. The interface shows the
current state of the service and its recent logs.</p>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click Services in the web console menu on the left. The default
tab for Services is System Services. If you want to manage targets,
sockets, timers, or paths, switch to the respective tab in the menu on top.
To open service settings, click on a selected service from the list.
You can tell which services are active or inactive by checking the State column.</p>
</li>
<li>
<p>Scroll down to see <strong>Service logs</strong>. The botton <strong>View All Logs</strong> can
be clicked to review an extensive output of the service's logs.
<a class="glightbox" href="../pi/img/cockpit_service_logs.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Service Enable" src="../pi/img/cockpit_service_logs.png" /></a></p>
</li>
</ol>
<hr />
<p>Note: Some content copied from 
<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/index"><strong>Managing systems using the RHEL9 web console</strong></a>
which is released under the Creative Commons Attribution–Share Alike 3.0
Unported license ("CC-BY-SA")</p></section><section class="print-page" id="pi-cockpit-firewall"><h1 id="pi-cockpit-firewall-managing-the-firewall">Managing the Firewall</h1>
<p>A firewall is a way to protect nodes from any unwanted traffic. It
enables users to control incoming network traffic on host machines
by defining a set of firewall rules. These rules are used to sort
the incoming traffic and either block it or allow it through. 
In the AllStarLink Pi APpliance, the firewalld service with
the nftables back end functions as the firewall. Through the web console,
you can configure firewalld. </p>
<h1 id="pi-cockpit-firewall-adding-an-inbound-port">Adding an Inbound Port</h1>
<p>The firewall is enabled by default with a reasonable set of default
rules. The most common reasons to edit the port list would be
to change the IAX2 port to be outside the range of 4560-4580
(default is 4569) or to change the voter port (default 1667
in ASL3, might need 667 for legacy reasons).</p>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click <strong>Networking</strong> in the web console menu on the left.</p>
</li>
<li>
<p>Click <strong>Edit rules and zones</strong> in the <strong>Firewall</strong>
panel.</p>
</li>
<li>
<p>Click <strong>Custom ports</strong></p>
</li>
<li>
<p>Enter the TCP or UDP port or ports to be permitted in the
<strong>TCP</strong> or <strong>UDP</strong> fields respectively. Multiple ports can
be separated with commands and a range of ports can be specified
with a hyphen. It is highly suggested to include a Description
for the port. For example, if adding an alternative IAX2 port on 14569:
<a class="glightbox" href="../pi/img/cockpit_firewall_customport.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Custom Port" src="../pi/img/cockpit_firewall_customport.png" /></a></p>
</li>
<li>
<p>Click <strong>Add ports</strong></p>
</li>
<li>
<p>The change is immediate.</p>
</li>
</ol>
<h1 id="pi-cockpit-firewall-removing-an-inbound-port">Removing an Inbound Port</h1>
<p>The firewall is enabled by default with a reasonable set of default
rules. The most common reasons to edit the port list would be
to change the IAX2 port to be outside the range of 4560-4580
(default is 4569) or to change the voter port (default 1667
in ASL3, might need 667 for legacy reasons).</p>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click <strong>Networking</strong> in the web console menu on the left.</p>
</li>
<li>
<p>Click <strong>Edit rules and zones</strong> in the <strong>Firewall</strong>
panel.</p>
</li>
<li>
<p>Next to the service to delete, click on the three vertical dots
and select <strong>Delete</strong>. The change is immediate.
<a class="glightbox" href="../pi/img/cockpit_firewall_delport.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Custom Port" src="../pi/img/cockpit_firewall_delport.png" /></a></p>
</li>
</ol>
<h1 id="pi-cockpit-firewall-enabling-and-disabling">Enabling and Disabling</h1>
<p>The firewall is enabled by default with a reasonable set of default
rules. Unless you are familiar with networking, DO NOT disable
the firewall or make changes to it.</p>
<ol>
<li>
<p>Log in to the web console with administrator privileges.
   For details, see <a href="#pi-cockpit-basics">Cockpit Basics</a>.</p>
</li>
<li>
<p>Click <strong>Networking</strong> in the web console menu on the left.</p>
</li>
<li>
<p>To enable the firewall, slide the toggle to the right. This is the
default setting and should not be changes unless you're 100% sure of
what you are doing.
<a class="glightbox" href="../pi/img/cockpit_firewall_enable.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Enable Firewall" src="../pi/img/cockpit_firewall_enable.png" /></a></p>
</li>
<li>
<p>To disable the firewall, slide the toggle to the left. Donot disable the
firewall unless you're 100% sure of what you are doing.
<a class="glightbox" href="../pi/img/cockpit_firewall_enable.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Disable Firewall" src="../pi/img/cockpit_firewall_enable.png" /></a></p>
</li>
</ol>
<hr />
<p>Note: Some content copied from 
<a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/9/html/managing_systems_using_the_rhel_9_web_console/index"><strong>Managing systems using the RHEL9 web console</strong></a>
which is released under the Creative Commons Attribution–Share Alike 3.0
Unported license ("CC-BY-SA")</p></section><h1 class='nav-section-title-end'>Ended: Pi Appliance</h1>
                        <h1 class='nav-section-title' id='section-advanced-topics'>
                            Advanced Topics <a class='headerlink' href='#section-advanced-topics' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="adv-topics"><h1 id="adv-topics-advanced-topics">Advanced Topics</h1>
<ul>
<li><a href="#adv-topics-commands">New Commands</a></li>
<li><a href="#adv-topics-incompatibles">Incompatibilities with Legacy Versions &amp; Configs</a></li>
<li><a href="#adv-topics-usbinterfaces">USB Audio Interfaces</a></li>
<li><a href="#adv-topics-sa818modules">SA818 RF Modules</a></li>
<li><a href="#adv-topics-conftmpl">Asterisk Templates</a></li>
<li><a href="httpreg/">HTTP Registration</a></li>
<li><a href="#adv-topics-allowdenylists">Allow and Deny Lists</a></li>
<li><a href="#adv-topics-other-software">Other Software Products</a></li>
<li><a href="#adv-topics-sip-phone">SIP Phone Setup</a></li>
<li><a href="#adv-topics-broadcastify">Broadcastify</a></li>
<li><a href="#adv-topics-hotspot_hd">Hot Spot Unkey Delay</a></li>
<li><a href="#adv-topics-autopatch">Autopatch</a></li>
<li><a href="#adv-topics-permissions">Permissions</a></li>
<li><a href="#adv-topics-noderesolution">Node Resolution</a></li>
</ul></section><section class="print-page" id="adv-topics-commands"><h1 id="adv-topics-commands-new-commands">New Commands</h1>
<p>New and different ASL3 commands are mentioned here. Older ASL commands are still documented on the  <a href="https://wiki.allstarlink.org">AllStarLink Wiki</a></p>
<h2 id="adv-topics-commands-app_rpt-commands">app_rpt commands</h2>
<ul>
<li>
<p><code>rpt show channels &lt;node&gt;</code></p>
</li>
<li>
<p><code>rpt show variables &lt;node&gt;</code> (replaces <code>rpt showvars</code>)</p>
</li>
<li>
<p><code>rpt show version</code></p>
</li>
<li>
<p><code>rpt show registrations</code> is the new command to show HTTP registrations.</p>
<p>ASL3 uses a new HTTP registration system. The old IAX registration system and <code>iax2 show registry</code> command still exist but HTTP registration should be used in its place.</p>
</li>
<li>
<p><code>rpt lookup &lt;node&gt;</code> can be used to lookup the IP address of a node.</p>
<p>In addition to the new registration system, ASL3 now implements a DNS lookup of node information.   By default, ASL3 will first query the AllStarLink DNS servers to resolve node information. It will fall back to the external rpt_extnodes file if the node cannot
be resolved by DNS.</p>
<p>You can use the Asterisk CLI command <code>rpt lookup &lt;node&gt;</code> command to show the IP address of a node.  For example, <code>rpt lookup 2000</code> will show the IP of node 2000. If you have the "bind9-host" package installed on your system, the equivalent Linux CLI command to query the IP would be <code>host 2000.nodes.allstarlink.org</code>.</p>
<p>The node lookup routines will output debug information showing the node lookups if the debug level is set to 4 or higher.</p>
<p>The operation of this ASL3 feature can be controlled by changing the following information in rpt.conf.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>[general]
node_lookup_method = both   ;method used to lookup nodes
                            ;both = dns lookup first, followed by external file (default)
                            ;dns = dns lookup only
                            ;file = external file lookup only
</code></pre></div>
<h2 id="adv-topics-commands-chan_simpleusb-commands">chan_simpleusb commands</h2>
<p><code>susb show settings</code>  is used to show the currently selected node's settings.
This replaces <code>susb tune</code>.</p>
<h2 id="adv-topics-commands-chan_usbradio-commands">chan_usbradio commands</h2>
<p><code>radio show settings</code>  is used to show the currently selected node's settings.
This replaces <code>radio tune</code>.</p>
<h2 id="adv-topics-commands-simpleusb-and-usbradio-tune-menus">SimpleUSB and USBRadio Tune Menus</h2>
<p>The <code>simpleusb-tune-menu</code> and <code>radio-tune-menu</code> utility programs have been updated with new options. The new options allow you change the operation of the respective channel driver, in realtime, without having to manually edit the <code>simpleusb.conf</code> or <code>usbradio.conf</code> files.</p>
<p>In addition to the updating settings, you can now view the live status of the COS, CTCSS inputs and PTT output.  This allows you to easily view and change their settings.</p>
<h2 id="adv-topics-commands-echolink">Echolink</h2>
<h3 id="adv-topics-commands-echolink-commands">Echolink commands</h3>
<p><code>echolink show nodes</code>  is used to view the currently connected echolink users.</p>
<p><code>echolink show stats</code>  is used to view the channel statistics for echolink.
It shows the number of in-bound and out-bound connections.  It also shows the cumulative system statistics, along with the statistics for each connected nodes.</p>
<h2 id="adv-topics-commands-helper-scripts">Helper scripts</h2>
<ul>
<li><code>asl-find-sound</code> script makes it easy to identify the device strings for attached USB sound interfaces.</li>
<li><code>asl-repo-switch</code> allows developers and testers switch between main, beta, and devel apt repos.</li>
</ul>
<h2 id="adv-topics-commands-debugging">Debugging</h2>
<p>Previously app_rpt and associated channels supported setting the debug level with an associated app / channel command.  These app / channel commands have been removed and replaced with the asterisk command:</p>
<p><code>core set debug x module</code> Where x is the debug level and module is the name of the app or module.</p>
<p>Examples:</p>
<ul>
<li><code>core set debug 5 app_rpt.so</code></li>
<li><code>core set debug 3 chan_echolink.so</code></li>
</ul>
<h3 id="adv-topics-commands-usb-eeprom-operation">USB EEPROM Operation</h3>
<p>chan_simpleusb and chan_usbradio allow users to store configuration information in the
EEPROM attached to their interface(s).  The CM119A can have manufacturer
information in the same area that stores the user configuration.  The CM119B does
have manufacturer data in the area that stores user configuration.  The
manufacturer data cannot be overwritten.  The user configuration data has been
moved higher in memory to prevent overwriting the manufacturer data.  If you
use the EEPROM to store configuration data, you will need to save it to the
EEPROM after upgrading.  Use <code>susb tune save</code> or <code>radio tune save</code>.</p></section><section class="print-page" id="adv-topics-incompatibles"><h1 id="adv-topics-incompatibles-incompatibilities-with-legacy-versions-configs">Incompatibilities with Legacy Versions &amp; Configs</h1>
<p>AllStarLink v3 has certain incompatible changes with older
versions of the AllStarLink system.</p>
<h2 id="adv-topics-incompatibles-voterrtcm-default-port">Voter/RTCM Default Port</h2>
<p>Modern installations of Asterisk runs as the unprivileged <code>asterisk</code> user rather than
as <code>root</code>. Standard Linux convention prohibits non-root users to listen on a TCP
port below 1024. The default port for Voters/RTCMs has been changed to <code>1667</code> when
previously it was <code>667</code>.</p>
<p>If the Voter/RTCM port cannot be easily changed, then the following
configuration can be made to the underlying operating system:</p>
<div class="highlight"><pre><span></span><code><span class="nb">echo</span><span class="w"> </span>net.ipv4.ip_unprivileged_port_start<span class="o">=</span><span class="m">667</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/sysctl.d/aslport667.conf
sysctl<span class="w"> </span>-p
systemctl<span class="w"> </span>restart<span class="w"> </span>asterisk
</code></pre></div>
<p>If running the AllStarLink Pi Appliance (or another system with a firewall),
inbound to port 667/UDP must be permitted. For directions on how to do this
with the Pi Appliance see <a href="#pi-cockpit-firewall">Managing the Firewall</a>.</p>
<h2 id="adv-topics-incompatibles-usb-udev">USB udev</h2>
<p>A udev rule is needed to allow Asterisk running as non-root access to the USB system. ASL3 systems installed from debs, apt install or images will already have this rule in place.</p>
<div class="highlight"><pre><span></span><code>/etc/udev/rules.d/90-asl3.rules
SUBSYSTEM==&quot;usb&quot;, ATTRS{idVendor}==&quot;0d8c&quot;, GROUP=&quot;plugdev&quot;, TAG+=&quot;uaccess&quot;
</code></pre></div>
<p>The UDev subsystem must be reloaded and then the USB device re-inserted
into the port. UDev is reloaded with the command</p>
<div class="highlight"><pre><span></span><code>udevadm<span class="w"> </span>control<span class="w"> </span>--reload
</code></pre></div>
<p>Alternatively, reboot the system.</p></section><section class="print-page" id="adv-topics-usbinterfaces"><h1 id="adv-topics-usbinterfaces-usb-audio-interfaces">USB Audio Interfaces</h1>
<p>Setting up USB audio interfaces is much easier with ASL3.</p>
<ul>
<li>The USB audio interface "tune" settings have been moved into their respective configuration files; "simpleusb.conf" and "usbradio.conf". The separate tune files (e.g. "simple-tune-usb1999.conf") no longer exist.</li>
<li>The device string is automatically found when the USB setting <code>devstr =</code> is empty.</li>
<li>rxchannel=SimpleUSB/USB1999 has been changed to rxchannel=SimpleUSB/1999. Same for rxchannel=Radio/1999 for consistency with other rxchannel= settings.</li>
<li>A new <code>asl-find-sound</code> script can be used to help identify the device strings for attached interfaces.</li>
</ul>
<p>The ASL3 menu and Asterisk CLI USB config commands handle these changes.</p>
<h3 id="adv-topics-usbinterfaces-eeprom-operation">EEPROM Operation</h3>
<p>chan_simpleusb and chan_usbradio allows users to store configuration information in the EEPROM attached to their Coverwritence(s).  The CM119A can have manufacturer information in the same area that stores the user consusbration.  The CM119B does have manufacturer data in the area that stores user configuration.  The manufacturer data cannot be overwriten.  The user configuration data has been moved higher in memory to prevent overwriting the manufacturer data.  If you use the EEPROM to store configuration data, you will need to save it to the EEPROM after upgrading.  Use <code>susb tune save</code> or <code>radio tune save</code>.</p></section><section class="print-page" id="adv-topics-sa818modules"><h1 id="adv-topics-sa818modules-sa818-rf-modules">SA818 RF Modules</h1>
<p>Setting up an SA818 RF module is much easier on ASL3.</p>
<p>Two new commands were added to ASL3 Pi Appliance systems to program the module.
We believe that most will prefer using <code>sa818-menu</code>, a visual interface to the RF module settings.
But, for those who prefer a command line interface we have also included <code>sa818</code>.</p>
<h2 id="adv-topics-sa818modules-sa818-menu">sa818-menu</h2>
<p>To program your SA818 with the menu executing the following command from the Linux shell :</p>
<div class="highlight"><pre><span></span><code>sa818-menu
</code></pre></div>
<p>Here, you will be able to view the last saved (or default) settings.
Please note that the "last saved" settings are those saved by the <code>sa818-menu</code> command on your system.  We have no way to "read" settings from the SA818 RF module.</p>
<p>The settings include :</p>
<table>
<thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Band</td>
<td>Specify the module type (VHF, UHF)</td>
</tr>
<tr>
<td>Bandwidth</td>
<td>Narrow (12.5KHz) or <strong>Wide (25.0KHz)</strong></td>
</tr>
<tr>
<td>Receive Frequency</td>
<td></td>
</tr>
<tr>
<td>Transmit Frequency</td>
<td></td>
</tr>
<tr>
<td>Squelch Value</td>
<td>Default = <strong>1</strong></td>
</tr>
<tr>
<td>Volume</td>
<td>Default = <strong>1</strong></td>
</tr>
<tr>
<td>Sub-audible tone</td>
<td><strong>None</strong>, CTCSS, DCS</td>
</tr>
<tr>
<td>Pre-Emphasis/De-emphasis</td>
<td>Default = <strong>Disabled</strong></td>
</tr>
<tr>
<td>High pass Filter</td>
<td>Default = <strong>Disabled</strong></td>
</tr>
<tr>
<td>Low pass Filter</td>
<td>Default = <strong>Disabled</strong></td>
</tr>
<tr>
<td>Serial Port</td>
<td>Default = <strong>/dev/serial0</strong> or <strong>/dev/ttyUSB0</strong></td>
</tr>
<tr>
<td>Connection Speed</td>
<td>Default = <strong>9600</strong></td>
</tr>
</tbody>
</table>
<p>If you change the sub-audible tone setting to CTCSS or DCS you will be presented with a list of possible tone frequencies.  When using CTCSS tones, you will also have a setting for the CTCSS Reverse Burst (Tail Tone).</p>
<p>The RF module will be programmed when you exit the menu.</p>
<p>Note: if you make changes that you do not wish to have stored then use the ESC key to exit the menu.</p>
<h2 id="adv-topics-sa818modules-sa818">sa818</h2>
<p>To program your SA818 using the command line you can execute the <code>sa818</code> command.  For command usage information, use <code>sa818 --help</code>.</p></section><section class="print-page" id="adv-topics-conftmpl"><h1 id="adv-topics-conftmpl-asterisk-templates">Asterisk Templates</h1>
<p>Asterisk now has a template configuration option. This can make editing Asterisk conf flies less tedious. So far, ASL3 is using templated configurations in the "rpt.conf", "simpleusb.conf", and "usbradio.conf" files.</p>
<h2 id="adv-topics-conftmpl-etcasteriskrptconf">/etc/asterisk/rpt.conf</h2>
<p>The "rpt.conf" file remains basically the same as it was in ASL2.  But, the organization has changed to make it easier to maintain, particularly for multi-node systems.</p>
<p>The template for a node in rpt.conf is named "[node-main]".  Every node tagged with "(node-main)" inherits all the template settings.  Template settings are overwritten by nodes with "(main-node)" attached.</p>
<p>As you will see, adding a new node requires the addition of just a few lines.  For example adding three nodes to your system may need nothing more than:</p>
<div class="highlight"><pre><span></span><code>[1999](node-main)
rxchannel = SimpleUSB/1999
idrecording = |iWB6NIL
startup_macro = *32000

[1998](node-main)
;this node would use the ID in the template
rxchannel = Radio/1998
morse = morse_1998

[1997](node-main)
;This might be a hub node if &quot;rxchannel = dahdi/pseudo&quot; is in the template
</code></pre></div>
<h2 id="adv-topics-conftmpl-etcasterisksimpleusbconf-etcasteriskusbradioconf">/etc/asterisk/simpleusb.conf, /etc/asterisk/usbradio.conf</h2>
<p>The "/etc/asterisk/simpleusb.conf" and "/etc/asterisk/usbradio.conf" files have also adopted a templated configuration.  Again, the template for a node is named "[node-main]".  Every node tagged with "(node-main)" inherits all the template settings.  Template settings are overwritten by nodes with "(main-node)" attached.</p>
<h2 id="adv-topics-conftmpl-asl-menu-support">ASL menu support</h2>
<p>The new ASL3 menu is fully aware of the templated configuration and handles adding, updating, and removing nodes.</p></section><section class="print-page" id="adv-topics-httpreg"><h1 id="adv-topics-httpreg-http-registration">HTTP Registration</h1>
<p>AllStarLink is moving from IAX2 to HTTP registration. ASL3 has a new module for http registration. ASL3 menu users need not be concerned about this change. The asl3-menu sets this for you.</p>
<p>The conf new file is <code>/etc/asterisk/rpt_http_registrations.conf</code>. The setting values are the same as they were in IAX2 registration.</p>
<div class="highlight"><pre><span></span><code>[General]

[registrations]
;Change the register =&gt; line to match your assigned node number and password.
register =&gt; 1999:password@register.allstarlink.org    ; This must be changed to your node number, password
</code></pre></div>
<p>While IAX registration still works, please do not register with both HTTP and IAX. That would result in unnecessary server load for no gain. The long term plan is to do away with IAX registration. HTTP registration also allows load balancing and other advantages not available with IAX. The ASL3 IAX module has been replaced with the Asterisk LTS IAX2 module for upstream compatibility.</p>
<p>The operation of this ASL3 feature is controlled by the following information in <code>/etc/asterisk/rpt.conf</code>.</p>
<p><div class="highlight"><pre><span></span><code>[general]
node_lookup_method = both   ;method used to lookup nodes
                    ;both = dns lookup first, followed by external file (default)
                    ;dns = dns lookup only
                    ;file = external file lookup only
</code></pre></div>
The node lookup routines will output debug information showing the node lookups if the debug level is set to 4 or higher.</p></section><section class="print-page" id="adv-topics-allowdenylists"><h1 id="adv-topics-allowdenylists-allow-and-deny-lists">Allow and Deny Lists</h1>
<p>These changes can easily be made from the ASL3 menu. Here's how to change and view the lists at the Asterisk CLI should you choose to do so. These lists were previously referred to as whitelist and blacklist.</p>
<p>ASL3 provides a way to establish either an "allowlist" or a "denylist" to limit access to your node(s).  New to ASL3 is the capability for nodes on the same server to have different lists.  Unlike ASL2, no modifications or scripts are required to the configuration files and there is no need to restart or reload the server.  All changes are made to the Asterisk database.  As soon as you make a change it takes effect.</p>
<p>The "allowlist" allows inbound connects and blocks all others. Nodes on the same server are always allowed. If any nodes are on the "allowlist" the "denylist" is ignored.</p>
<ul>
<li>Add an allowed node at the Asterisk CLI&gt; <code>database put allowlist/yournode/allownode "Our friend"</code></li>
<li>Add another node to the "allowlist" with <code>database put allowlist/yournode/anothernode "Our other friend"</code></li>
</ul>
<p>The "denylist" prevents nodes from connecting to your node. Add a "denylist" if you only have a few nodes you want to block.</p>
<ul>
<li>Add a denied node at the Asterisk CLI&gt; <code>database put denylist/yournode/denynode "Not our friend"</code></li>
<li>Add a another denied node at the Asterisk CLI&gt; <code>database put denylist/yournode/anothernode "Not our other friend"</code></li>
</ul>
<p>To see what's in the database.</p>
<ul>
<li>Show entire db CLI&gt; <code>database show</code></li>
<li>Show entire "allowlist" for all your nodes CLI&gt; <code>database show allowlist</code></li>
<li>Show entire "allowlist" for all your one node CLI&gt; <code>database show allowlist/yournode</code></li>
<li>Show just the one your one allowed one node CLI&gt; <code>database show allowlist/yournode/othernode</code></li>
</ul>
<p>To delete an entire "allowlist"</p>
<ul>
<li>At the asterisk CLI&gt; <code>database del allowlist</code></li>
<li>To delete all allowed nodes CLI&gt; <code>database del allowlist/yournode</code></li>
</ul></section><section class="print-page" id="adv-topics-other-software"><h1 id="adv-topics-other-software-other-software-products">Other Software Products</h1>
<p>The following information relates to software components related to AllStarLink.</p>
<h2 id="adv-topics-other-software-web-dashboards">Web Dashboards</h2>
<p>The primary web dashboard supported by AllStarLink is <a href="#allmon3">Allmon3</a>.</p>
<p>But, we know there are other dashboards available and everyone has their own personal favorite.
We also know that some of the other dashboards make use of database ("astdb.txt").
Typically, this DB has been downloaded by a PHP script ("astdb.php") and updated with the help of boot scripts and cron jobs.</p>
<p>To support these other dashboards we have included a systemd service to download and update the "astdb.txt" database.  By default, this service and its associated timer are disabled.  If you have installed a dashboard that is dependent on this database you will need to execute the following commands :</p>
<div class="highlight"><pre><span></span><code>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>asl3-update-astdb.service
systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>asl3-update-astdb.timer
systemctl<span class="w"> </span>start<span class="w"> </span>asl3-update-astdb.timer
</code></pre></div></section><section class="print-page" id="adv-topics-sip-phone"><h1 id="adv-topics-sip-phone-setting-up-a-sip-phone">Setting up a SIP Phone</h1>
<p>This document describes the steps necessary to set up a SIP phone in ASL3.  The setup procedure has changed due to the depreciation of chan_sip.  Users are now required to use chan_pjsip.  chan_pjsip brings new features to the sip stack and is the supported sip channel for the future.</p>
<h2 id="adv-topics-sip-phone-update-modulesconf">Update modules.conf</h2>
<p>chan_pjsip requires a number of modules to be loaded.  You should start by editing /etc/asterisk/modules.conf and add the following at the bottom of the file:</p>
<div class="highlight"><pre><span></span><code>    ;
    ;modules for pjsip
    ;
    noload = app_voicemail.so
    load = bridge_builtin_features.so
    load = bridge_builtin_interval_features.so
    load = bridge_holding.so
    load = bridge_native_rtp.so
    load = bridge_simple.so
    load = bridge_softmix.so
    load = chan_bridge_media.so
    load = chan_pjsip.so
    load = func_pjsip_endpoint.so
    load = func_sorcery.so
    load = func_devstate.so
    load = res_pjproject.so
    load = res_pjsip_acl.so
    load = res_pjsip_authenticator_digest.so
    load = res_pjsip_caller_id.so
    load = res_pjsip_dialog_info_body_generator.so
    load = res_pjsip_diversion.so
    load = res_pjsip_dtmf_info.so
    load = res_pjsip_endpoint_identifier_anonymous.so
    load = res_pjsip_endpoint_identifier_ip.so
    load = res_pjsip_endpoint_identifier_user.so
    load = res_pjsip_exten_state.so
    load = res_pjsip_header_funcs.so
    load = res_pjsip_logger.so
    load = res_pjsip_messaging.so
    load = res_pjsip_mwi_body_generator.so
    load = res_pjsip_mwi.so
    load = res_pjsip_nat.so
    load = res_pjsip_notify.so
    load = res_pjsip_one_touch_record_info.so
    load = res_pjsip_outbound_authenticator_digest.so
    load = res_pjsip_outbound_publish.so
    load = res_pjsip_outbound_registration.so
    load = res_pjsip_path.so
    load = res_pjsip_pidf_body_generator.so
    load = res_pjsip_pidf_digium_body_supplement.so
    load = res_pjsip_pidf_eyebeam_body_supplement.so
    load = res_pjsip_publish_asterisk.so
    load = res_pjsip_pubsub.so
    load = res_pjsip_refer.so
    load = res_pjsip_registrar.so
    load = res_pjsip_rfc3326.so
    load = res_pjsip_sdp_rtp.so
    load = res_pjsip_send_to_voicemail.so
    load = res_pjsip_session.so
    load = res_pjsip.so
    noload = res_pjsip_t38.so
    noload = res_pjsip_transport_websocket.so
    load = res_pjsip_xpidf_body_generator.so
    load = res_rtp_asterisk.so
    load = res_sorcery_astdb.so
    load = res_sorcery_config.so
    load = res_sorcery_memory.so
    load = res_sorcery_realtime.so
</code></pre></div>
<h2 id="adv-topics-sip-phone-update-extensionsconf">Update extensions.conf</h2>
<p>The next step is to update extension.conf.  This creates a dial plan that controls access to your node by sip phones.  Edit /etc/asterisk/extensions.conf and add the following to the bottom of the file.  This example will set up extension 1001 as your local phone and the dialing plan for your node.</p>
<div class="highlight"><pre><span></span><code>    [sip-phones]
    exten =&gt; 1001,1,Dial(PJSIP/${EXTEN},60,rT)

    exten =&gt; ${NODE},1,Ringing
    exten =&gt; ${NODE},n,Answer(3000)
    exten =&gt; ${NODE},n,Set(NODENUM=${CALLERID(number)})
    exten =&gt; ${NODE},n,Playback(extension)
    exten =&gt; ${NODE},n,SayDigits(${NODENUM})
    exten =&gt; ${NODE},n,Playback(connected)
    exten =&gt; ${NODE},n,Playback(rpt/node)
    exten =&gt; ${NODE},n,SayDigits(${EXTEN})
    exten =&gt; ${NODE},n,rpt(${EXTEN}|P)
    exten =&gt; ${NODE},n,Hangup
</code></pre></div>
<p>The above dial plan will allow your sip phone to dial your node number.  This dial plan announces the extension number and the connecting node number.  The orange highlighted lines can be removed if you do not want the announcement.</p>
<p>The ${NODE} variable is defined at the top of extensions.conf and should be your assigned node number.  See the following.</p>
<div class="highlight"><pre><span></span><code>    [globals]
    HOMENPA = 999 ; change this to your Area Code
    NODE = 1999   ; change this to your node number
</code></pre></div>
<p>The entry <strong>1001</strong> in extensions.conf is the extension number for your sip phone.  If you want to use a different extension number, change <strong>1001</strong> to your desired extension number.</p>
<p><em>Note:  If you attempt to copy extensions.conf from a previous release of AllStarLink, it will fail.  AllStarLink version 3 requires comma delimiters instead of pipe symbols for standard asterisk functions.  The rpt function continues to use a pipe delimiter.  This is subject to change in a future release.</em></p>
<h2 id="adv-topics-sip-phone-update-pjsipconf">Update pjsip.conf</h2>
<p>You are now ready to configure pjsip.  Edit /etc/asterisk/pjsip.conf.  Don’t get overwhelmed by all of the text in the sample configuration.  pjsip supports several configurations.  This document focuses on the necessary entries to get a sip phone operational.</p>
<p>Scroll down to the Basic UDP transport section.  It should look like the following:</p>
<div class="highlight"><pre><span></span><code>    ; Basic UDP transport
    ;
    [transport-udp]
    type=transport
    protocol=udp    ;udp,tcp,tls,ws,wss,flow
    bind=0.0.0.0:5060
</code></pre></div>
<p>Scroll down to the section titled Endpoint Configured For Use With A Sip Phone.  For each extension, you will need to enter 3 sections.  Here is an example for extension 1001.</p>
<div class="highlight"><pre><span></span><code>    [1001]
    type=endpoint
    transport=transport-udp
    context=sip-phones
    disallow=all
    allow=ulaw
    allow=alaw
    allow=gsm
    auth=1001
    aors=1001
    callerid=&quot;My CallerID&quot;
    ;
    ; A few more transports to pick from, and some related options below them.
    ;
    ;transport=transport-tls
    ;media_encryption=sdes
    ;transport=transport-udp-ipv6
    ;transport=transport-udp-nat
    ;direct_media=no
    ;
    ; MWI related options

    ;aggregate_mwi=yes
    ;mailboxes=6001@default,7001@default
    ;mwi_from_user=6001
    ;
    ; Extension and Device state options
    ;
    ;device_state_busy_at=1
    ;allow_subscribe=yes
    ;sub_min_expiry=30
    ;
    ; STIR/SHAKEN support.
    ;
    ;stir_shaken=no
    ;stir_shaken_profile=my_profile

    [1001]
    type=auth
    auth_type=userpass
    password=1001
    username=1001

    [1001]
    type=aor
    max_contacts=4
    ;contact=sip:6001@192.0.2.1:5060
</code></pre></div>
<p>If you want to use a different extension number, you will need to change <strong>[1001]</strong> with your desired number.  The item <strong>callerid="My CallerID"</strong> should also be updated for your preferred caller identifier.</p>
<p>The items <strong>password=1001</strong> and <strong>username=1001</strong> should be updated to match the username and password you want for your extension number.  You should use a complex password.  Do not use the extension number.  You can use the password generator located <a href="https://www.lastpass.com/features/password-generator#generatorTool">here </a>to generate a complex password.</p>
<p>These three sections can be replicated for each extension that you want to add to the system.</p>
<h2 id="adv-topics-sip-phone-restart-your-asterisk">Restart your asterisk</h2>
<p>After completing these changes, you must restart asterisk or reboot your system.</p>
<div class="highlight"><pre><span></span><code>systemctl<span class="w"> </span>restart<span class="w"> </span>asterisk
</code></pre></div>
<h2 id="adv-topics-sip-phone-example-config-with-multiple-sip-phones">Example config with multiple sip phones</h2>
<p>As noted above you can have more sip phones.  Here is an example of a simple dial plan that has multiple extensions.</p>
<div class="highlight"><pre><span></span><code>    [sip-phones]
    ; Extension 210 - Line 1
    ; Extension 211 - Line 2
    ; Extension 212 - Garage
    ; Extension 213 - Cordless ATA
    ; Extension 1000 - Voice Mail

    exten =&gt; 210,1,Dial(PJSIP/210,60,rT)
    exten =&gt; 211,1,Dial(PJSIP/211,60,rT)
    exten =&gt; 212,1,Dial(PJSIP/212,60,rT)
    exten =&gt; 213,1,Dial(PJSIP/213,60,rT)
    exten =&gt; 1000,1,VoiceMailMain(210)
    exten =&gt; 1000,2,Hangup

    ; Allow SIP calls to local nodes
    exten =&gt; 1998,1,rpt(1998|P)
    exten =&gt; 1999,1,rpt(1999|P)
</code></pre></div>
<p>This example includes voicemail.  To use voice mail, you will need to change <code>noload = app_voicemail.so</code>to <code>load = app_voicemail.so.</code></p>
<h2 id="adv-topics-sip-phone-troubleshooting">Troubleshooting</h2>
<p>If you have trouble connecting your sip phone, start the asterisk command line with <code>asterisk -rvvv</code>.  Enter the command <code>pjsip set logger on</code>.  This will show the communications between the sip phone and asterisk.  It will also show the actions in your dial plan.</p>
<h2 id="adv-topics-sip-phone-security">Security</h2>
<p>If you will be exposing your system to the outside world.  You should consider using fail2ban to protect the system.</p></section><section class="print-page" id="adv-topics-broadcastify"><h1 id="adv-topics-broadcastify-streaming-node-audio-to-broadcastify">Streaming Node Audio to Broadcastify</h1>
<p>To broadcast your node's audio on <a href="https://www.broadcastify.com/">Broadcastify</a>,
you will need a Broadcastify account. You can then apply for a feed.
This <a href="https://support.broadcastify.com/hc/en-us/articles/204740055-Becoming-a-Feed-Provider">link</a>
provides information on applying for a feed.</p>
<p>After you have your account and feed credentials, you a ready to setup AllStar.</p>
<h2 id="adv-topics-broadcastify-setup-a-feed">Setup a Feed</h2>
<ul>
<li>
<p>Log into your node either using Cockpit or SSH and type the following commands:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>update
sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>libshout-dev<span class="w"> </span>libtagc0-dev<span class="w"> </span>lame<span class="w"> </span>ezstream
</code></pre></div></p>
</li>
<li>
<p>Edit <code>/etc/ezstream.xml</code> with your favorite editor - for example
<code>sudo nano -w /etc/ezstream.xml</code>.  You will be
creating a new file. Copy, paste, and edit the following contents
into the file:
<div class="highlight"><pre><span></span><code><span class="nt">&lt;ezstream&gt;</span>
<span class="w">    </span><span class="nt">&lt;servers&gt;</span>
<span class="w">        </span><span class="nt">&lt;server&gt;</span>
<span class="w">            </span><span class="nt">&lt;protocol&gt;</span>HTTP<span class="nt">&lt;/protocol&gt;</span>
<span class="w">            </span><span class="nt">&lt;hostname&gt;</span>Replace<span class="w"> </span>with<span class="w"> </span>Broadcastify<span class="w"> </span>URL<span class="nt">&lt;/hostname&gt;</span>
<span class="w">            </span><span class="nt">&lt;port&gt;</span>80<span class="nt">&lt;/port&gt;</span>
<span class="w">            </span><span class="nt">&lt;password&gt;</span>Replace<span class="w"> </span>with<span class="w"> </span>your<span class="w"> </span>stream<span class="w"> </span>password<span class="nt">&lt;/password&gt;</span>
<span class="w">            </span><span class="nt">&lt;tls&gt;</span>none<span class="nt">&lt;/tls&gt;</span>
<span class="w">        </span><span class="nt">&lt;/server&gt;</span>
<span class="w">    </span><span class="nt">&lt;/servers&gt;</span>

<span class="w">    </span><span class="nt">&lt;streams&gt;</span>
<span class="w">        </span><span class="nt">&lt;stream&gt;</span>
<span class="w">            </span><span class="nt">&lt;mountpoint&gt;</span>Replace<span class="w"> </span>with<span class="w"> </span>your<span class="w"> </span>mount<span class="w"> </span>point<span class="w"> </span>path<span class="nt">&lt;/mountpoint&gt;</span>
<span class="w">            </span><span class="nt">&lt;format&gt;</span>MP3<span class="nt">&lt;/format&gt;</span>
<span class="w">                </span><span class="nt">&lt;stream_name&gt;</span>Replace<span class="w"> </span>with<span class="w"> </span>your<span class="w"> </span>feed<span class="w"> </span>name<span class="nt">&lt;/stream_name&gt;</span>
<span class="w">                </span><span class="nt">&lt;stream_url&gt;</span>Your<span class="w"> </span>web<span class="w"> </span>page<span class="nt">&lt;/stream_url&gt;</span>
<span class="w">                </span><span class="nt">&lt;stream_genre&gt;</span>Amateur<span class="w"> </span>Radio<span class="nt">&lt;/stream_genre&gt;</span>
<span class="w">                </span><span class="nt">&lt;stream_description&gt;</span>Replace<span class="w"> </span>with<span class="w"> </span>your<span class="w"> </span>stream<span class="w"> </span>description<span class="nt">&lt;/stream_description&gt;</span>
<span class="w">                </span><span class="nt">&lt;stream_bitrate&gt;</span>16<span class="nt">&lt;/stream_bitrate&gt;</span>
<span class="w">                </span><span class="nt">&lt;stream_channels&gt;</span>1<span class="nt">&lt;/stream_channels&gt;</span>
<span class="w">                </span><span class="nt">&lt;stream_samplerate&gt;</span>22050<span class="nt">&lt;/stream_samplerate&gt;</span>
<span class="w">                </span><span class="nt">&lt;stream_public&gt;</span>Yes<span class="nt">&lt;/stream_public&gt;</span>
<span class="w">        </span><span class="nt">&lt;/stream&gt;</span>
<span class="w">    </span><span class="nt">&lt;/streams&gt;</span>

<span class="w">    </span><span class="nt">&lt;intakes&gt;</span>
<span class="w">        </span><span class="nt">&lt;intake&gt;</span>
<span class="w">            </span><span class="nt">&lt;type&gt;</span>stdin<span class="nt">&lt;/type&gt;</span>
<span class="w">        </span><span class="nt">&lt;/intake&gt;</span>
<span class="w">    </span><span class="nt">&lt;/intakes&gt;</span>
<span class="nt">&lt;/ezstream&gt;</span>
</code></pre></div></p>
</li>
<li>
<p>Save the file.</p>
</li>
<li>
<p>Ensure the file is owned and readable only by the asterisk user:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>chown<span class="w"> </span>asterisk:asterisk<span class="w"> </span>/etc/ezstream.xml
sudo<span class="w"> </span>chmod<span class="w"> </span><span class="m">660</span><span class="w"> </span>/etc/ezstream.xml
</code></pre></div></p>
</li>
<li>
<p>Edit <code>/etc/asterisk/rpt.conf</code> with your favorite editor - e.g. <code>sudo nano -w /etc/asterisk/rpt.conf</code></p>
</li>
<li>
<p>Locate the node stanza for the node from which to stream to
broadcastify. The stanza is <code>[NNNNN](node-main)</code>. For example, if
your node is 63001 then look for <code>[63001](node-main)</code>. Within that configuration
stanza, add the following line:
<div class="highlight"><pre><span></span><code>outstreamcmd = /bin/sh,-c,/usr/bin/lame --preset cbr 16 -r -m m -s 8 --bitwidth 16 - - | /usr/bin/ezstream -qvc /etc/ezstream.xml
</code></pre></div></p>
</li>
</ul>
<p>The above parameters have these meanings:
<div class="highlight"><pre><span></span><code>-- preset cbr 16` = use constant bit rate 16
-r = Assume the input file is raw pcm
-m m = Mode mono
-s 8 = sample rate 8
--bitwidth 16 = bit width is 16 (default)   
</code></pre></div></p>
<ul>
<li>After these changes have been made, you will need to restart asterisk:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>asterisk
</code></pre></div></li>
</ul>
<p>If you experience any problems, look at /var/log/ezstream.log for error messages.</p>
<h2 id="adv-topics-broadcastify-migrating-an-existing-feed">Migrating an existing feed</h2>
<p>If you have an existing feed, you will need to upgrade your existing xml file to the new format.  You can use the following commands.
<div class="highlight"><pre><span></span><code>cd /etc
ezstream-cfgmigrate -0 ezstream.xml &gt; ezstream.xml.new
cp ezstream.xml ~/
mv ezstream.new ezstream.xml
</code></pre></div></p></section><section class="print-page" id="adv-topics-hotspot_hd"><h1 id="adv-topics-hotspot_hd-hot-spot-unkey-delay">Hot Spot Unkey Delay</h1>
<p>When setting up a hot spot select the Duplex 1 option with the asl-menu
will allow the hot spot to function. However the unkey delay of the
radio transmiter will be too long.</p>
<p>These steps will shorting the unkey delay and will greatly
improve hot spot responsiveness.</p>
<ul>
<li>From the node's landing page click the  Web Admin Portal</li>
<li>Select terminal</li>
<li>Type <code>sudo asl-menu</code></li>
<li>Select <code>6. Expert Configuration Menu</code></li>
<li>Select <code>1. Edit rpt.conf</code></li>
<li>Select <code>2. /bin/nano   &lt;---- easiest</code> if asked</li>
<li>Scroll down below the line with <code>[&lt;your node number&gt;](node-main)</code></li>
<li>On a blank line that is above <code>[functions]</code><ul>
<li>type <code>wait_times = wait-times_hd</code></li>
<li>press enter and type <code>hangtime=100</code></li>
<li>Save with cntl-X, enter, yes.</li>
</ul>
</li>
<li>On the asl-menu select <code>&lt;Back to Main Menu&gt;</code></li>
<li>Select <code>1. Node Settings</code></li>
<li>Select <code>2. Restart Asterisk</code></li>
<li>Select <code>&lt;Back&gt;</code></li>
<li>Select <code>&lt;Exit Main Menu&gt;</code></li>
<li>Select <code>&lt;Yes&gt;</code></li>
</ul>
<p>This setup will likely be a single menu selection with the next release of ASL3.</p></section><section class="print-page" id="adv-topics-autopatch"><h1 id="adv-topics-autopatch-autopatch">Autopatch</h1>
<p>The autopatch feature in app_rpt allows users on the radio to interconnect with the public switched telephone network.</p>
<h2 id="adv-topics-autopatch-regulatory-issues">Regulatory Issues</h2>
<p><em>Some countries do not allow third-party traffic through autopatching or 
telephone interconnection on amateur radio frequencies. In addition, if a system 
is linked between one country which allows autopatching and one which doesn't, 
just the passing of the traffic itself across the link could be considered a 
violation of the rules in the prohibiting country. In countries which permit 
autopatching, users need be made aware of this and should take the node off-link 
before using the autopatch.</em></p>
<h2 id="adv-topics-autopatch-security-issues">Security Issues</h2>
<p><em>The examples provided here do not secure the autopatch against toll fraud. A lot 
can be done to prevent or reduce toll fraud, but the prevention measures vary by 
where you are located geographically. Most of the prevention measures will be in 
extensions.conf. You can write contexts to reject certain number sequences. 
The <a href="http://www.asteriskdocs.org/">asterisk book</a> should be consulted to see how to do 
this, Before placing any autopatch in service, please make sure you have secured 
your system so that toll fraud does not become an issue.</em></p>
<h2 id="adv-topics-autopatch-selecting-a-voip-provider">Selecting a VOIP Provider</h2>
<p>Call termination into the public switched telephone network is a service offered by
a Voice Over IP provider (VOIP). This is a highly competitive business, 
and there are lots of VOIP providers offering termination for Asterisk users. 
Termination is usually provided using the SIP protocol, while IAX is offered 
by a few providers.</p>
<p>When selecting an VOIP provider, make sure they provide setup instructions with 
example configurations including usernames, and passwords. Quite a few VOIPs will 
automatically generate a custom SIP or IAX stanza for insertion into sip.conf, 
or iax.conf respectively.</p>
<h2 id="adv-topics-autopatch-configuration-files">Configuration Files</h2>
<p>Three configuration files will be used to setup the autopatch: <strong>rpt.conf</strong>, <strong>extensions.conf</strong> and 
<strong>iax.conf</strong> or <strong>sip.conf</strong>. The VOIP provider should provide a stanza for you to insert in 
<strong>iax.conf</strong> or <strong>sip.conf</strong>. The configuration below shows how each of these files are 
used when an outgoing autopatch call is made.</p>
<p>In the <strong>rpt.conf</strong> configuration file, a context in extensions.conf is defined 
in a node stanza using the context key:</p>
<p><div class="highlight"><pre><span></span><code>[1234]

context = autopatch                 ; dialing context for phone
callerid = &quot;Repeater&quot; &lt;0000000000&gt;  ; callerid for phone calls
accountcode = RADIO                 ; account code (optional)
</code></pre></div>
Also in the <strong>rpt.conf</strong> file, entries are added to the function stanza so 
that users can bring up or take down the autopatch:
<div class="highlight"><pre><span></span><code>[functions]
61 = autopatchup,noct=1,farenddisconnect=1,dialtime=20000,context=autopatch
62 = autopatchdn 
</code></pre></div></p>
<p>In <strong>extensions.conf</strong>, a stanza for the autopatch context is added which 
refers to the peer stanza in iax.conf or sip.conf. </p>
<p>For outbound IAX connections extensions.conf
<div class="highlight"><pre><span></span><code>[autopatch] 

exten =&gt; _1NXXNXXXXXX,1,Dial,IAX2/peername/${EXTEN} 
exten =&gt; _1NXXNXXXXXX,2,Congestion 
</code></pre></div>
For outbound SIP connections it should look like this:
<div class="highlight"><pre><span></span><code>[autopatch] 

exten =&gt; _1NXXNXXXXXX,1,Dial,SIP/peername/${EXTEN} 
exten =&gt; _1NXXNXXXXXX,2,Congestion 
</code></pre></div></p>
<p>The peer stanza you insert in <strong>iax.conf</strong> or <strong>sip.conf</strong> should preferably be 
provided by your VOIP provider. You'll want to use the stanza they identify for 
performing outgoing connections. A nonoperational example of an iax2 peer stanza 
looks like this:
<div class="highlight"><pre><span></span><code>[peername]
type=peer 
host=127.0.0.1 
secret=nunya
auth=md5 
disallow=all 
allow=gsm 
allow=ulaw
</code></pre></div></p>
<h2 id="adv-topics-autopatch-autopatch-options">Autopatch Options</h2>
<p>There are several options that can be passed to the autopatchup command class.</p>
<p>This table summarizes what they do:</p>
<table>
<thead>
<tr>
<th>Autopatch Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>context</td>
<td>Override the context specified for the autopatch in rpt.conf</td>
</tr>
<tr>
<td>dialtime</td>
<td>The maximum time to wait between DTMF digits when a telephone number is being dialed. The patch will automatically disconnect if this time is exceeded. The value is specified in milliseconds.</td>
</tr>
<tr>
<td>farenddisconnect</td>
<td>When set to 1, the patch will automatically disconnect when the called party hangs up. The default is send a circuit busy tone until the radio user brings the patch down.</td>
</tr>
<tr>
<td>noct</td>
<td>When this is set to 1, the courtesy tone during an autopatch call will be disabled. The default is to send the courtesy tone whenever the radio user unkeys.</td>
</tr>
<tr>
<td>quiet</td>
<td>When set to 1, do not send dial tone, voice responses, just try to connect the call.</td>
</tr>
<tr>
<td>voxalways</td>
<td>When set to 1, enables vox mode.</td>
</tr>
<tr>
<td>exten</td>
<td>Overrides the default autopatch extension.</td>
</tr>
<tr>
<td>nostar</td>
<td>Disables the repeater function prefix</td>
</tr>
</tbody>
</table>
<h2 id="adv-topics-autopatch-simplex-autopatch">Simplex Autopatch</h2>
<p>For nodes with duplex set to 0 or 1, Simplex Autopatch operation is supported.
This is accomplished by using a VOX on the audio coming from the telephone call, 
because of the half-duplex nature of the node. To avoid having audio from the 
telephone call keep the transmitter engaged for extended periods of time (if there 
is some source of continuous audio), there are two time-out values. </p>
<p>Vox timeout, which is the maximum amount of time that the VOX can hold the transmitter 
engaged, which by default is 10 seconds. The other one is the Vox recovery time, which
is the amount of time that the Vox is disabled during times of continuous audio, after
the Vox timeout, which is 2 seconds. During continuous audio, it transmits for 
10 seconds, then stops for 2 seconds (so that you can transmit to it and perhaps 
disconnect the call), then transmits for another 10 seconds, then stops for 2 seconds.
This repeats until the call is disconnected.</p>
<p>Additionally, to prevent 'chop-off' of the first syllable or two of the audio from the 
telephone call, the audio is delayed to allow for the transmitter to start transmitting 
and any CTCSS tones to be decoded. This delay is typically 500ms, but can be adjusted
using the 'simplexpatchdelay' parameter. It is specified in units of 20 milliseconds.</p>
<p>These time-out values may be overridden by using the following configuration parameters
located in the [node-number] section of <strong>rpt.conf</strong>:
<div class="highlight"><pre><span></span><code>[1999]
voxtimeout = 10000 ; vox timeout time in ms
voxrecover = 2000  ; vox recover time in ms
simplexpatchdelay = 25 ; Delay for transmit while in patch in 20ms increments
simplexphonedelay = 25 ; Delay for phone while in patch for 20ms increments
</code></pre></div></p></section><section class="print-page" id="adv-topics-permissions"><h1 id="adv-topics-permissions-permissions">Permissions</h1>
<h2 id="adv-topics-permissions-asterisk-vs-root">"asterisk" vs "root"</h2>
<p>One of the new features with ASL3 is that the Asterisk process now runs as the "asterisk" user (not as the super-user; "root").
While sometimes handy this was potentially very dangerous.
This change was made for increased security.
It's a good thing!</p>
<p>We acknowledge that there are some applications, commands, and scripts that you may want to bring over from older (and other) versions of ASL and that these may be impacted by ASL3's heightened security.
Porting these over to ASL3 may require some simple changes to filesystem permissions.
Other issues may need other solutions (e.g. you can't execute a command that requires "root" privileges when you are not the "root" user).
For guidance, reach out to the <a href="https://community.allstarlink.org/">AllStarLink Community</a>.</p>
<p>In short, in ASL3 the Asterisk process now runs as the "asterisk" user.
If you modify the "/etc/asterisk/rpt.conf" file to execute a command (or script) it will NOT have super-user ("root") privileges.
The command itself and any file it references must be readable by the "asterisk" user.
Any files that the command needs to modify must be writable by the "asterisk" user.
Lastly, the parent directory of any file being created must also be writable.</p>
<h2 id="adv-topics-permissions-filesystem-permissions">Filesystem Permissions</h2>
<p>The following is a very brief overview of Linux filesystem permissions.
More in-depth information is available on the internet (search for “linux file permissions”).</p>
<p>On a Linux system, each file (and directory) has permissions that effect access by the “owner”, permissions that effect access to those logins in the same “group”, and permissions that effect access to “other” logins.
The permissions determine whether you (or some other process) can read, write, or execute the files (or search in directories).
There are commands to change the ownership (“chown”) and permissions (“chmod”) for each file/directory.</p>
<h3 id="adv-topics-permissions-file-permissions">File permissions</h3>
<p>You can use the <code>ls -l [FILE]</code> command to view file permissions.
The permissions determine whether the calling process can read ("r"), write ("w"), or execute ("x") the file.
Here are some examples :</p>
<div class="highlight"><pre><span></span><code>node63001:~/examples $ ls -l *file*
-rw------- 1 root root     0 Aug  5 08:28 1-file-owner-root-can-read-write
-rw-r----- 1 root asterisk 0 Aug  5 08:28 2-file-add-group-asterisk-can-read
-rw-r--r-- 1 root asterisk 0 Aug  5 08:27 3-file-add-everyone-can-read

node63001:~/examples $ ls -l *script*
-rwx------ 1 root root     0 Aug  5 08:28 1-script-owner-root-can-read-write-execute
-rwxr-x--- 1 root asterisk 0 Aug  5 08:28 2-script-add-group-asterisk-can-read-execute
-rwxr-xr-x 1 root asterisk 0 Aug  5 08:27 3-script-add-everyone-can-read-execute
</code></pre></div>
<p>In each case, the file permissions progress from the most restrictive (only the file owner can read/execute) to most available (all users can read/execute).</p>
<h3 id="adv-topics-permissions-directory-permissions">Directory permissions</h3>
<p>You can use the <code>ls -ld &lt;directory&gt;</code> command to view the permissions on a directory (vs. the contents of a directory).
The permissions determine whether the calling process can read ("r"), write ("w"), or search ("x") the directory.
Here are some examples :</p>
<div class="highlight"><pre><span></span><code>node63001:~/examples $ ls -ld *dir*
drwx------ 2 root root     4096 Aug  5 09:56 1-dir-owner-root-can-read-write-search
drwxr-x--- 2 root asterisk 4096 Aug  5 09:56 2-dir-add-group-asterisk-can-read-search
drwxr-xr-x 2 root asterisk 4096 Aug  5 09:56 3-dir-add-everyone-can-read-search
</code></pre></div>
<p>In each case, the directory permissions progress from the most restrictive (only the directory owner can read/write/search) to most available (all users can read/search).</p>
<h3 id="adv-topics-permissions-changing-permissions">Changing permissions</h3>
<p>The following commands can be used to change the permissions of files and directories :</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>Description</th>
<th>Sample Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>chown</td>
<td>change file owner and group</td>
<td># chown root /var/asl-backups/asl-backup-files</td>
</tr>
<tr>
<td>chgrp</td>
<td>change group ownership</td>
<td># chgrp asterisk /var/spool/asterisk/monitor</td>
</tr>
<tr>
<td>chmod</td>
<td>change file mode bits</td>
<td># chmod 640 /etc/asterisk/manager.conf</td>
</tr>
</tbody>
</table>
<p>Any process with "write" permission to a file can update (including completely overwrite) the file.
A process with "write" permission to a directory can add/remove/rename files in that directory.
If a command/script is writable then it can be changed to "do something different" when it is next executed.
When updating filesystem permissions, please remember that doing so can potentially expose the contents of files (and directories) to others.
Be cautious!</p></section><section class="print-page" id="adv-topics-noderesolution"><h1 id="adv-topics-noderesolution-node-resolution">Node Resolution</h1>
<p>app_rpt has three ways to resolve a node number to an IP address. </p>
<ul>
<li>An external node directory file.</li>
<li>Domain Name Service (DNS).</li>
<li>Statically entered in rpt.conf</li>
</ul>
<p>The above mechanisms are used to translate a node number into its respective public IP address.  Connections are made directly between nodes using their public IP addresses.</p>
<p>app_rpt first looks to see if the node is statically configured.  If it is not found, the setting for <strong>node_lookup_method</strong> in the <strong>[general]</strong> stanza of rpt.conf determines the next step. The default setting is to perform a DNS lookup and if not found, attempt a lookup using the external file.  For more information see <a href="https://allstarlink.github.io/adv-topics/httpreg/">HTTP Registration</a></p>
<p><em>Note:  The AllStarLink network maintains security by requiring node owners to register with AllStarLink. Before a node is published to our directory it must successfully authenticate and register with our server.</em> </p>
<h2 id="adv-topics-noderesolution-external-node-directory-file">External Node Directory File</h2>
<p>app_rpt can use an external node directory file to perform node resolution.  The <a href="https://github.com/AllStarLink/asl3-update-nodelist">asl3-update-nodeList</a> service is used to periodically download the current list of authenticated nodes.</p>
<p>The name of this file is configured in rpt.conf using the <strong>extnodefile</strong> key and value.  By default the name of this file is /var/lib/asterisk/rpt_extnodes.  Multiple files can be specified based on your requirements.  The file names are separated with a comma.</p>
<p>When a file based lookup is performed, app_rpt reloads the external file before searching for a match.  This allows external scripts the opportunity to keep the file updated.</p>
<p>Here is an example of the external file format:</p>
<div class="highlight"><pre><span></span><code>[extnodes]

2000=radio@162.248.93.134:4569/2000,162.248.93.134
2001=radio@162.248.93.134:4569/2001,162.248.93.134
</code></pre></div>
<h2 id="adv-topics-noderesolution-domain-name-service-dns">Domain Name Service DNS</h2>
<p>AllStarLink now provides a DNS service for performing node resolution.  DNS is an Internet standard and is more efficient than using a file base solution.</p>
<p>When using DNS app_rpt must know the length of the longest node number.  The current maximum is 6 digits.  This number can be  overridden in rpt.conf by adding the <strong>max_dns_node_length</strong> key and value to the <strong>[general]</strong> stanza.</p>
<p>For more information on DNS see <a href="https://wiki.allstarlink.org/wiki/DNS_Servers">AllStarLink DNS Servers</a>.</p>
<h2 id="adv-topics-noderesolution-statically-configured-node">Statically Configured Node</h2>
<p>In some cases, it is desirable to statically define the node information.  This is commonly used for private nodes or private networks.</p>
<p>To configure a static node, enter the information for the node in rpt.conf under the <strong>[node]</strong> stanza.  Here is an example configuration:</p>
<div class="highlight"><pre><span></span><code>[nodes]
1001 = radio@192.168.0.1/1001,NONE
1998 = radio@127.0.0.1:4568/1998,NONE
1999 = radio@192.168.0.2:4569/1999,NONE
</code></pre></div></section><h1 class='nav-section-title-end'>Ended: Advanced Topics</h1>
                        <h1 class='nav-section-title' id='section-allmon3'>
                            Allmon3 <a class='headerlink' href='#section-allmon3' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="allmon3"><h1 id="allmon3-allmon3">Allmon3</h1>
<p>Allmon is the standard web-based monitoring and management for the AllStarLink v3.
Allmon3 is the next generation of web dashboards for AllStarLink,
rewritten for performance, scalability, and responsiveness.</p>
<h1 id="allmon3-design-goals">Design Goals</h1>
<p>Allmon3 features and functionality shall be governed by the following guidelines:</p>
<ul>
<li>Use of modern web responsive design for usability on all device form factors and screen sizes</li>
<li>Clear separation between long-running tasks and client-based display updates</li>
<li>Permit reduced workload on potentially slow repeater site links by cleanly supporting the ability to run only the pollers on the device controlling the repeater and run the dashboard in the cloud; easy prevention of unnecessary web traffic, spidering, etc.</li>
<li>Prioritization of the common use cases of AllStarLink for feature enhancements</li>
</ul>
<h1 id="allmon3-community">Community</h1>
<p>All code of Allmon3 not otherwise licensed (e.g., Bootstrap, etc.) is licensed
under the <a href="https://www.gnu.org/licenses/why-affero-gpl.html">GNU Affero General Public License v3</a>.
The choice of the AGPLv3 promotes giving back to the amateur radio and
ASL communities.</p></section><section class="print-page" id="allmon3-install"><h1 id="allmon3-install-installation">Installation</h1>
<h2 id="allmon3-install-supported-platforms">Supported Platforms</h2>
<p>Allmon3 is only supported on:*</p>
<ul>
<li>Debian 12 Bookworm (including Raspoberry Pi OS 12)</li>
<li>Debian 11 Bullseye (including Raspberry PiOS 11)</li>
</ul>
<h2 id="allmon3-install-asl3-packages-install">ASL3 Packages Install</h2>
<h3 id="allmon3-install-debian-12">Debian 12</h3>
<ul>
<li>
<p>Install the AllStarLink repository file
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>-s
<span class="nb">cd</span><span class="w"> </span>/tmp
wget<span class="w"> </span>https://repo.allstarlink.org/public/asl-apt-repos.deb12_all.deb
sudo<span class="w"> </span>dpkg<span class="w"> </span>-i<span class="w"> </span>asl-apt-repos.deb12_all.deb
sudo<span class="w"> </span>apt<span class="w"> </span>update
</code></pre></div></p>
</li>
<li>
<p>Install allmon3:
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>allmon3
</code></pre></div></p>
</li>
</ul>
<h3 id="allmon3-install-debian-11">Debian 11</h3>
<ul>
<li>
<p>Enable the Debian 11 <code>bullseye-backports</code> package repository:
<div class="highlight"><pre><span></span><code>gpg --keyserver keyserver.ubuntu.com --recv-keys 0E98404D386FA1D9
gpg --keyserver keyserver.ubuntu.com --recv-keys 6ED0E7B82643E131
gpg --export 0E98404D386FA1D9 | sudo apt-key add -
gpg --export 6ED0E7B82643E131 | sudo apt-key add -
echo &quot;deb https://deb.debian.org/debian bullseye-backports main&quot; &gt; /etc/apt/sources.list.d/bullseye-backports.list
apt update
</code></pre></div></p>
</li>
<li>
<p>Install the dependencies
<div class="highlight"><pre><span></span><code>apt install -y apache2 python3-argon2 
apt install -y -t bullseye-backports python3-websockets python3-aiohttp python3-aiohttp-session
</code></pre></div></p>
</li>
<li>
<p>Install Allmon3
<div class="highlight"><pre><span></span><code>wget https://github.com/AllStarLink/Allmon3/releases/download/t_rel_1_2_0/allmon3_1.2.0-1.bullseye_all.deb
dpkg -i allmon3_1.2.0-1.bullseye_all.deb
</code></pre></div></p>
</li>
</ul>
<h3 id="allmon3-install-debian-10">Debian 10</h3>
<p>Note: Allmon v1.2.1 will be the last version for Debian 10. Please
upgrade your AllStarLink system to AllStarLink v3 on Debian 12.</p>
<ul>
<li>
<p>Enable the Debian 10 <code>buster-backports</code> package repository:
<div class="highlight"><pre><span></span><code>gpg --keyserver keyserver.ubuntu.com --recv-keys 04EE7237B7D453EC
gpg --keyserver keyserver.ubuntu.com --recv-keys 648ACFD622F3D138
gpg --keyserver keyserver.ubuntu.com --recv-keys 0E98404D386FA1D9
gpg --keyserver keyserver.ubuntu.com --recv-keys 6ED0E7B82643E131
gpg --export 04EE7237B7D453EC | sudo apt-key add -
gpg --export 648ACFD622F3D138 | sudo apt-key add -
gpg --export 0E98404D386FA1D9 | sudo apt-key add -
gpg --export 6ED0E7B82643E131 | sudo apt-key add -
echo &quot;deb https://deb.debian.org/debian buster-backports main&quot; &gt; /etc/apt/sources.list.d/buster-backports.list
apt update
</code></pre></div></p>
</li>
<li>
<p>Install the dependencies
<div class="highlight"><pre><span></span><code>apt install -y apache2 python3-argon2 
apt install -y -t buster-backports python3-async-timeout python3-attr python3-multidict python3-yarl python3-pip
</code></pre></div></p>
</li>
<li>
<p>Install Python modules using PIP3
<div class="highlight"><pre><span></span><code>apt remove python3-aiohttp python3-websockets
pip3 install aiohttp
pip3 install aiohttp_session
pip3 install websockets
</code></pre></div></p>
</li>
<li>
<p>Update the CA Certificate chain since Debian 10 is out of support
<div class="highlight"><pre><span></span><code>apt install ca-certificates
update-ca-certificates --fresh
</code></pre></div></p>
</li>
<li>
<p>Install Allmon3 (debian10 version)
<div class="highlight"><pre><span></span><code>wget https://github.com/AllStarLink/Allmon3/releases/download/t_rel_1_2_0/allmon3_1.2.0-1.buster_all.deb
dpkg -i allmon3_1.2.0-1.buster_all.debntu.com --recv-keys 6ED0E7B82643E131
</code></pre></div></p>
</li>
</ul>
<h2 id="allmon3-install-install-from-source">Install from Source</h2>
<p>Installation from source is not supported in the general use case. However, 
<code>make install</code> should yield a working system.</p></section><section class="print-page" id="allmon3-config"><h1 id="allmon3-config-configuration">Configuration</h1>
<p>All configuration resides in <code>/etc/allmon3</code>. The stock configuration
files are always available at <code>/usr/share/doc/allmon3/</code> for recovery
and documentation.</p>
<p>After changing any configuration file, the service <code>allmon3</code> must be
restarted using <code>systemctl restart allmon3</code>.</p>
<h2 id="allmon3-config-node-configuration">Node Configuration</h2>
<p>Allmon3's node connections are configured in <code>/etc/allmon3/allmon3.ini</code>. The
<code>allmon3.ini</code> file is a standard INI-formatted file. Each stanza in 
the file is a node number. Each node stanza then can take the following
options:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Req'd / Opt</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>host</strong></td>
<td>Req'd</td>
<td>-</td>
<td>DNS name or IP address of the Asterisk/ASL node</td>
</tr>
<tr>
<td><strong>port</strong></td>
<td>Opt</td>
<td>5038</td>
<td>Port of the Asterisk manager</td>
</tr>
<tr>
<td><strong>user</strong></td>
<td>Req'd</td>
<td>-</td>
<td>username of the Asterisk monitor, most commonly 'admin'</td>
</tr>
<tr>
<td><strong>pass</strong></td>
<td>Req'd</td>
<td>-</td>
<td>password of the monitor user</td>
</tr>
<tr>
<td><strong>multinodes</strong></td>
<td>Opt</td>
<td>-</td>
<td>this node is a server hosting multiple nodes and this is the "primary" record for the host.</td>
</tr>
<tr>
<td><strong>voters</strong></td>
<td>Opt</td>
<td>n[,n,...]</td>
<td>List voters on this server, comma separate. No value disabled voters</td>
</tr>
<tr>
<td><strong>pollinterval</strong></td>
<td>Opt</td>
<td>1</td>
<td>polling interval to asterisk in default is 1. this value can be expressed as a decimal fraction of a second - e.g., .5 is 500ms, .375 is 375ms, etc.</td>
</tr>
<tr>
<td><strong>vpollinterval</strong></td>
<td>Opt</td>
<td>1</td>
<td>Broadcast interval of voter data in seconds default is 1. this value can be expressed as a decimal fraction of a second - e.g., .5 is 500ms, .375 is 375ms, etc.</td>
</tr>
<tr>
<td><strong>retryinterval</strong></td>
<td>Opt</td>
<td>15</td>
<td>Seconds between retries if initial connection to asterisk is lost (optional, default 15)</td>
</tr>
<tr>
<td><strong>retrycount</strong></td>
<td>Opt</td>
<td>"Infinite"</td>
<td>number of times to retry a lost asterisk connection before ending (default infinite)</td>
</tr>
</tbody>
</table>
<p>An example minimal node configuration would be:
<div class="highlight"><pre><span></span><code>[12345]
host = 127.0.0.1
user = admin
pass = Passw0rd
</code></pre></div></p>
<p>An example of a server with multiple nodes on it:
<div class="highlight"><pre><span></span><code>[12345]
host = 127.0.0.1
user = admin
pass = Passw0rd
multinodes = 12345, 23456
</code></pre></div></p>
<p>Here's an example for monitoring three ASL Nodes:
<div class="highlight"><pre><span></span><code>[50815]
host=172.17.16.36
user=admin
pass=password

[460180]
host=172.17.16.217
user=admin
pass=password

[48496]
host=192.2.0.145
user=admin
pass=password
voter=y
votertitle=Megavoter
</code></pre></div></p>
<h2 id="allmon3-config-server-customization">Server Customization</h2>
<p>Allmon3 has multiple configuration files to consider:</p>
<ul>
<li>
<p><code>/etc/allmon3/web.ini</code> - This is the customization interface
for the Allmon3 web interface. I</p>
</li>
<li>
<p><code>/etc/allmon3/custom.css</code> - Certain CSS customizations to change
colors in the application. Follows standard CSS rules and syntax.</p>
</li>
<li>
<p><code>/etc/allmon3/menu.ini</code> - Allows for the customization of the
Allmon3 web menu. By default, the menu is a list of all nodes
found in <code>allmon3.ini</code>. Customized menus can be configured
as described in <code>menu.ini.example</code>.</p>
</li>
</ul>
<h3 id="allmon3-config-webini">web.ini</h3>
<p>The <code>web.ini</code> file has four configuration sections - 
<em>web</em>, <em>syscmds</em>, <em>node-overrides</em>, and <em>voter-titles</em>. </p>
<h4 id="allmon3-config-web">[web]</h4>
<p>The <em>web</em> section has the basic customizations
for the Allmon3 site. Each item in this section
is documented in the file.  </p>
<h4 id="allmon3-config-syscmds">[syscmds]</h4>
<p>The <em>syscmds</em> section defines the templates in the "system commands" menu.
This stanza lists commands that are templates for the systems command
modal dialog. The format is:</p>
<p><div class="highlight"><pre><span></span><code>[syscmds]
  command text = Command Label
  command text = Command Label
  command text = Command Label
  ...
</code></pre></div>
In any command text the @ will be replaced with the node the command
modal was selected from. For example:
<div class="highlight"><pre><span></span><code>    rpt status @ = Show Node Status
</code></pre></div>
wll result in the command 'rpt status 1999' assuming this command was
selected from Node #1999.</p>
<p>It is possible to create optional stanzas named in the format
<code>[syscmds-NODE]</code> (e.g. <code>[syscmds-1999]</code>) and have those commands
templates appear only for the given NODE listed. Example:</p>
<div class="highlight"><pre><span></span><code>[syscmds-1999]
rpt cmd @ cop 999 xxx = Execute function 999
</code></pre></div>
<h4 id="allmon3-config-node-overrides">[node-overrides]</h4>
<p>The <em>node-overrides</em> section can be used to override information
from the ASL database. Using this section, the AllStarLink DB
labels for a node may be replaces with custom text. The format is:</p>
<p><div class="highlight"><pre><span></span><code>[node-overrides]
    NODE1 = TEXT HERE
    NODE2 = TEXT HERE 2
</code></pre></div>
This section must exist even if it's empty. For example:</p>
<div class="highlight"><pre><span></span><code>[node-overrides]
    1999 = My special private node
    2010 = Wild Party Node
</code></pre></div>
<h4 id="allmon3-config-voter-titles">[voter-titles]</h4>
<p>The <em>voter-titles</em> section is used to set display names for voters.
This functions identically to <code>[node-overrides]</code>. For any
voter not named here, voters will have an auto-generated
name of "Voter NODE".</p>
<h3 id="allmon3-config-menuini">menu.ini</h3>
<p>If this file is present in the api/ subdirectory of Allmon3's web interface
and named <code>menu.ini</code>, this file will override the default behavior of the
web interface simply listing the configured nodes in the left navbar.
If this file is not present, all nodes in allmon3.ini/allmon3.ini.php
will display singly in configured order.</p>
<p>NOTE: Not listing a node in the menu WILL NOT cause the node to go
un-polled if it is already configured in allmon3.ini. This allows
the system administrator to have "hidden" nodes. If you want to completely
stop polling an Asterisk/ASL node, the node must be removed from allmon3.ini.</p>
<p>The format for this file is as follows:</p>
<p><div class="highlight"><pre><span></span><code>[ TITLE ]                         :: The stanza header is the label
                                  :: for this menu item
type  = ( menu | single )         :: If type = menu, the item is interpreted as a dropdown
                                  :: menu with each LABEL item displaying. If the
                                  :: type = single, then only a the first LABEL = TARGET
                                  :: will be displayed as a non-dropdown. In the case of
                                  :: type = single, the [ TITLE ] is ignored completely

LABEL = TARGET                    :: Each [ TITLE ] displays one or more LABELS
LABEL = TARGET                    :: with a link to TARGET. When TARGET is all numbers
LABEL = TARGET                    :: then TARGET is assumed to be a ASL node and
                                  :: the link will filter down to the TARGET node
                                  :: specified. Any other pattern will be interpreted
                                  :: as a full or partial URL/URI.
                                  ::
                                  :: Of special node, creating a menu item of
                                  :: multiple nodes to display, TARGET and simply be
                                  :: #NODE,NODE,NODE - e.g. #1999,1998,1997
</code></pre></div>
Note that the order of the nodes within a stanza is irrelevant. They will be displayed
as sorted alphabetically ascending according to UTF-8 (e.g. 0-9, A-Z, +).</p>
<p>An example custom menu may look like:
<div class="highlight"><pre><span></span><code>[ W8WKY ]
type = menu
W8WKY = 43211
48496 = 48496
45839 = 45839

[ N8XPK ]
type = menu
N8XPK = 42993
43118 = 43118
47987 = 47987

[ Test ]
type = single
AllStarLink = https://www.allstarlink.org
</code></pre></div></p>
<h2 id="allmon3-config-using-nginx-instead-of-apache">Using Nginx instead of Apache</h2>
<p>Nginx can be used instead of Apache. Instead of using the <code>apache2</code>
package, install <code>nginx</code> using the above directions. After configuring
nginx, edit <code>/etc/nginx/sites-available/default</code> (or your preferred site
configuration) and add an <code>include</code> directive within the appropriate
<code>server { }</code> configuration block. For example:</p>
<div class="highlight"><pre><span></span><code>server {
    listen 80 default_server;

    [... other stuff ...]

    include /etc/allmon3/nginx.conf;

    [... other stuff ...]
}
</code></pre></div></section><section class="print-page" id="allmon3-usermgmt"><h1 id="allmon3-usermgmt-user-management">User Management</h1>
<p>Allmon3 supports a robust multi-user configuration that 
permits per-node granular access as desired and that
abstracts Allmon3 from the Asterisk AMI Manager 
configuration.</p>
<p>Usernames and passwords are stored in <code>/etc/allmon3/users</code>.</p>
<p>The default-configured username and
password combination is<code>allmon3 / password</code>.</p>
<p><span style="color:red; size=1.2em"><strong>You <em>must</em> change this before exposing a host to the Internet</strong></span></p>
<h2 id="allmon3-usermgmt-user-database">User Database</h2>
<p>Allmon3's user database is managed by <code>allmon3-passwd</code>. Adding a new user
or editing an existing user is the same command. If the user does not exist,
it will be added. If the user does exist, the password will be updated. 
To add or edit a user's password: </p>
<p><div class="highlight"><pre><span></span><code>$ allmon3-passwd allmon3
Enter the password for allmon3: password
Confirm the password for allmon3: password
</code></pre></div>
That's all there is to it. The <code>/etc/allmon3/users</code> file is readable to see that the
Argon2 hash changed for the user.</p>
<p>Deleting a user is simply adding the <code>--delete</code> flag to the command:</p>
<div class="highlight"><pre><span></span><code>$ allmon3-passwd --delete allmon3
</code></pre></div>
<p>After changing a user password, the allmon3 damon must be reloaded
with <code>systemctl reload allmon3</code>.</p>
<h2 id="allmon3-usermgmt-per-node-restrictions-for-users">Per-Node Restrictions for Users</h2>
<p>Allmon3 implements a lightweight access control system to restrict commands
from certain users to certain nodes. Restrictions are configured in
<code>/etc/allmon3/user-restrictions</code>. Given that the average use case is
all users have similar access, the access control is implemented in
a named-restrictions model for least configuration complexity.</p>
<p>The logic is as follows when checking the restricted access list:</p>
<ol>
<li>
<p>If the user is not listed in <code>user-restrictions</code> at all
than the user is permitted commands on all configured nodes.</p>
</li>
<li>
<p>If the user is listed in <code>user-restrictions</code> and is listed
as restricted to the node being commanded, the user is permitted
to issue the command.</p>
</li>
<li>
<p>If the user is listed in <code>user-restrictions</code> but the node
is not listed for that user, the user is prohibited from
issuing the command.</p>
</li>
</ol>
<p>The format of the <code>user-restrictions</code> file is:</p>
<p><div class="highlight"><pre><span></span><code>user1 | NODE[,NODE,NODE...]
user2 | NODE
</code></pre></div>
Lines beginning with # are comments.</p></section><h1 class='nav-section-title-end'>Ended: Allmon3</h1>
                        <h1 class='nav-section-title' id='section-developer-guide'>
                            Developer Guide <a class='headerlink' href='#section-developer-guide' title='Permanent link'>↵</a>
                        </h1>
                        <section class="print-page" id="developers"><h1 id="developers-developers-and-maintainers">Developers and Maintainers</h1>
<p><a href="#developers-package-builds">Package Building in GitHub</a></p>
<p><a href="#developers-source-install">Source Installation for Developers</a></p>
<p><a href="#developers-aptly">Apt Package Repository</a></p></section><section class="print-page" id="developers-package-builds"><h1 id="developers-package-builds-building-asl3-asterisk">Building ASL3-Asterisk</h1>
<h2 id="developers-package-builds-building-deb-files">Building .deb Files</h2>
<p>These directions outline how to create the <code>.deb</code> files
via GitHub using the Action workflows and the ASL custom
runner AMIs in AWS.</p>
<p>Kicking off the build processes requires knowledge of all
of the topics below before starting it.</p>
<h2 id="developers-package-builds-package-version-format">Package version format</h2>
<p>All packages created by this repo have the following version
format based on <code>deb-version(7)</code> manpage explanation.</p>
<pre>
 ${EPOCH}:${ASTERISK_VERSION}+asl3-${RPT_VERSION}-${PACKAGE_VERSION}

|----+---|--------+--------------------------X-----+--------X
     |            |                                |
     |            +-- "upstream-version"           |
     |                                             |
     +-- "epoch"               "debian-revision" --+
</pre>

<p>The values are defined as follows:</p>
<ul>
<li>
<p><code>EPOCH</code> - By Debian Asterisk convention this is hardcoded as "2"</p>
</li>
<li>
<p><code>ASTERISK_VERSION</code> - The Asterisk LTS version to use for these packages - e.g. 20.8.1</p>
</li>
<li>
<p><code>RPT_VERSION</code> - The "app_rpt" version to use for these packages. This should be based
on the tag of the release of app_rpt applied to that repository that is driven 
by the major, minor, and patch versions listed in <code>app_rpt.h</code>.</p>
</li>
<li>
<p><code>PACKAGE_VERSION</code> - The ASL3 project release version of the package build. Usually 1 unless there
was a problem specifically with package building that caused a new .deb publication needed. In
general, this is only incremented if <code>ASTERISK_VERSION</code> and <code>RPT_VERSION</code> aren't changing but
something needed to be changed in the <code>debian/</code> build directory.</p>
</li>
</ul>
<p>A file generated from this repo using the versioning format above will be named,
for example <code>asl3-asterisk-20.8.1+asl3-3.0.0-1</code>. Note that the <em>epoch</em> does not appear
in the filename by debian convention.</p>
<h2 id="developers-package-builds-determining-asterisk-version">Determining Asterisk Version</h2>
<p>Currently, this is structured to be built against Asterisk 20 Long Term Servicing
(LTS). Do not use any version of Asterisk that is not the latest version of 
Asterisk 20 LTS. The version is listed at
<a href="https://www.asterisk.org/downloads/">Download Asterisk</a>. The version of Asterisk
entered in the Actions launcher will cause the proper version of Asterisk 20 LTS
to be downloaded and folded into the builder.</p>
<h2 id="developers-package-builds-locking-in-and-determining-the-app_rpt-version">Locking In and Determining the app_rpt Version</h2>
<p>When a build of <code>.deb</code> files is initiated, the app_rpt repo should must 
be tagged prior to initiating the build process. The tag version should
be in the format <code>MAJOR.MINOR.PATCH</code> as found in <code>app_rpt.h</code>.</p>
<h2 id="developers-package-builds-determining-the-package-version">Determining the Package Version</h2>
<p>This should be a monotonically increasing integer starting with 1
reflecting a change in Asterisk Version + app_rpt. For example,
if building Asterisk 20.8.1 with app_rpt v3.0.0, then
the first build of a package should be 1, the second 2, and so on.</p>
<p>However, if from the above example, app_rpt is now v3.1.0 or
Asterisk becomes 20.9.0 then the package version should reset back to
1 and start over.</p>
<h2 id="developers-package-builds-create-a-github-release">Create a GitHub Release</h2>
<p>Create a <a href="https://github.com/AllStarLink/asl3-asterisk/releases">Release</a>
to store the .deb files in. The name of the release should follow the 
format:</p>
<div class="highlight"><pre><span></span><code>ASTERISK_VERSION_asl3-RPT_VERSION-PACKAGE_VERSION
</code></pre></div>
<p>For the above example of Asterisk "20.7.0", app_rpt "1.2", and 
package version "1" the release tag and name would be:
<div class="highlight"><pre><span></span><code>20.7.0_asl3-1.2-1
</code></pre></div>
Note: GitHub acts oddly about + signs in the tags and release
names so it's converted to an underscore.</p>
<h2 id="developers-package-builds-executing-the-github-action-to-build-packages">Executing the GitHub Action to Build Packages</h2>
<p>The following steps build the Debian packages:</p>
<ul>
<li>
<p>Navigate to the <a href="https://github.com/AllStarLink/asl3-asterisk/actions">GitHub repository Actions tab</a></p>
</li>
<li>
<p>Under <em>All workflows</em> -&gt; <em>Workflows</em> click on <code>Make and Publish Pkgs</code></p>
</li>
<li>
<p>To the right of the label <em>This workflow has a workflow_dispatch event trigger</em>
click on <strong>Run workflow</strong></p>
</li>
<li>
<p>In the dropdown, enter the following information:</p>
<ul>
<li>
<p><em>Asterisk LTS Version Base</em> - This is the Asterisk version determined above</p>
</li>
<li>
<p><em>app_rpt Version Tag</em> - This is the app_rpt version determined above</p>
</li>
<li>
<p><em>Package Revision</em> - This is the Package Version determined above</p>
</li>
<li>
<p><em>Platform Architecture</em> - Choose <code>amd64</code> or <code>arm64</code> as appropriate</p>
</li>
<li>
<p><em>Debian Release Version</em> - Choose the Debian release version to build. Note that
  currently the releases in GitHub do not support multiple Debian releases in the
  same GitHub release. This is a ToDo item (#17).</p>
</li>
<li>
<p><em>Github Release Tag</em> - This is tag release created above in Create a GitHub Release</p>
</li>
<li>
<p>For now, leave <em>Aptly Repository Stream</em> and <em>Commit Versioning</em> at their
default values.</p>
</li>
</ul>
</li>
<li>
<p>Click <strong>Run Workflow</strong></p>
</li>
<li>
<p>After a moment, a new running workflow will appear (yellow circle with a darker
circling swoosh). This can be monitored for process. If the process succeeds with
a green checkbox, the .deb files should appear in the Release. If not,
there are problems that need to be diagnosed and resolved.</p>
</li>
</ul>
<p>Note: as noted above, you will choose the platform architecture when starting a workflow.  All workflows will create the architecture specific packages.  The "amd64" workflow also creates the architecture independent ("all") packages.  What does this mean?  If you only want "amd64" packages then you would only need to run the single workflow.  But, if you want packages for an alternate architecture (e.g. "arm64") then will need to run a workflow for that architecture AND one for the "amd64" architecture.</p></section><section class="print-page" id="developers-source-install"><h1 id="developers-source-install-source-based-installation">Source-Based Installation</h1>
<p>Source install is for developers or users who need to install AllStarLink 3
on unsupported hardware or operating systems. Installing ASL from source
code is primarily for developers.  Doing so will require you to download,
compile, and install multiple projects.  You will also need to be very
comfortable using various development tools and the Linux CLI.</p>
<p>The following instructions are for building ONLY Asterisk with ASL's app_rpt.</p>
<ul>
<li>Source install does not include any helpers, Allmon3, asl3-menu, asl3-nodelist, etc.</li>
<li>Installs and runs Asterisk as root (this is, in general, bad)</li>
</ul>
<h2 id="developers-source-install-install-phreaknetsh-script">Install phreaknet.sh script</h2>
<p>The phreaknet script compiles and patches Asterisk and DAHDI.  You should install the script with the following commands :</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/usr/src
wget<span class="w"> </span>https://docs.phreaknet.org/script/phreaknet.sh
chmod<span class="w"> </span>+x<span class="w"> </span>phreaknet.sh
./phreaknet.sh<span class="w"> </span>make
</code></pre></div>
<p>Once installed, you can keep the script updated with :</p>
<div class="highlight"><pre><span></span><code>phreaknet<span class="w"> </span>update
</code></pre></div>
<h2 id="developers-source-install-install-asterisk-20-lts">Install Asterisk 20 LTS</h2>
<p>Use -t or -b for developer mode. Both are optional.</p>
<ul>
<li>The -t is for backtraces and thread debug. Thread debugging is resource intensive.</li>
<li>Use -b for backtraces only, recommended on 386 or for submitting core dumps.</li>
<li>The -s is for sip if you need it still, leave off the -s if you don’t</li>
<li>The -d is for DAHDI and is required</li>
<li>The -v is to install the latest of the major version specified, 20 in this case</li>
<li>Use -f to force a reinstall (upgrade)</li>
</ul>
<div class="highlight"><pre><span></span><code>phreaknet install -d -b -v 20
</code></pre></div>
<p>Asterisk should be running at this point but not app_rpt. Check the install with <code>asterisk -r</code>.</p>
<h2 id="developers-source-install-clone-asl3-repo">Clone ASL3 repo</h2>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>/usr/src
git<span class="w"> </span>clone<span class="w"> </span>https://github.com/AllStarLink/app_rpt.git
</code></pre></div>
<h2 id="developers-source-install-install-asl3">Install ASL3</h2>
<p>This script does a git pull of app_rpt and compiles the branch you are on.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>app_rpt
./rpt_install.sh
</code></pre></div>
<h2 id="developers-source-install-install-asl3-configs">Install ASL3 configs</h2>
<p>This adds ASL3 configs to the full set of Asterisk configuration files. ASL3 modules.conf limits what actually runs.</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>/usr/src/app_rpt/configs/rpt/*<span class="w"> </span>/etc/asterisk
</code></pre></div>
<p>After restarting Asterisk (or rebooting the system) you should now have a complete ASL3 install.  You can use the following command as a quick check :</p>
<p><div class="highlight"><pre><span></span><code>asterisk<span class="w"> </span>-rx<span class="w"> </span><span class="s2">&quot;rpt localnodes&quot;</span>
</code></pre></div>
You should see node 1999.</p></section><section class="print-page" id="developers-aptly"><h1 id="developers-aptly-allstarlink-apt-repos">AllStarLink Apt Repos</h1>
<p>AllStarLink's primary installation method is through the use of
Debian packages and the Apt deployment system.</p>
<h2 id="developers-aptly-repository-structure">Repository Structure</h2>
<p>The repository is located at <code>https://repo.allstarlink.org/public</code> and
is managed using <a href="https://www.aptly.info/">Aptly</a>. The Aptly structure
is a multi-local-repo system that is coalesced into a single 
public repository with multiple components per distribution.</p>
<p>There are three main local repositories:</p>
<ul>
<li>
<p><strong>asl3-prod</strong> - Packages for production-quality use.</p>
</li>
<li>
<p><strong>asl3-beta</strong> - Packages that are ready for general testing and
are expected to be promoted to asl3-prod.</p>
</li>
<li>
<p><strong>asl3-devel</strong> - Development quality packages that are for
development testing only. While these packages are available
to the general user, use of this component in extremely
discouraged without a developer's guidance.</p>
</li>
</ul>
<p>Each repository contains one or more distributions. Currently the
only distribution supported is <code>bookworm</code> for Debian 12.</p>
<p>Each repository has a default component name that, when
published together, form the basis of the labeling scheme of 
promotion of packages from devel -&gt; beta -&gt; prod. The component
mapping is:</p>
<ul>
<li>asl3-prod = main</li>
<li>asl3-beta = beta</li>
<li>asl3-devel = devel</li>
</ul>
<p>All local repositories are merged and published into a single
public-facing repository. This is usable by one of the following
<code>.list</code> configurations in<code>/etc/apt/sources.list.d</code>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Primary AllStarLink Repo for Production Packages</span>
deb<span class="w"> </span><span class="o">[</span>signed-by<span class="o">=</span>/etc/apt/keyrings/allstarlink.gpg<span class="o">]</span><span class="w"> </span>https://repo.allstarlink.org/public<span class="w"> </span>bookworm<span class="w"> </span>main

<span class="c1"># Include Beta Component for Testing</span>
deb<span class="w"> </span><span class="o">[</span>signed-by<span class="o">=</span>/etc/apt/keyrings/allstarlink.gpg<span class="o">]</span><span class="w">  </span>https://repo.allstarlink.org/public<span class="w"> </span>bookworm<span class="w"> </span>main<span class="w"> </span>beta

<span class="c1"># Include Beta and Devel component for Development</span>
deb<span class="w"> </span><span class="o">[</span>signed-by<span class="o">=</span>/etc/apt/keyrings/allstarlink.gpg<span class="o">]</span><span class="w">  </span>https://repo.allstarlink.org/public<span class="w"> </span>bookworm<span class="w"> </span>main<span class="w"> </span>beta<span class="w"> </span>devel
</code></pre></div>
<p>All packages in the repository are signed by GPG and the key is provided with
repository installation .deb file.</p>
<h2 id="developers-aptly-aptly-github-runner-integrations">Aptly + GitHub Runner Integrations</h2>
<p>ASL3-related GitHub repositories are integrated with the Aptly repository
and running the "Make and Publish Pkgs" Action from each project
will result in .deb files being compiled and stored in Aptly. Currently
it's possible to build files directly into the <code>devel</code> and <code>beta</code>
components but not prod. Moving packages into <code>prod</code> currently
requires administrator intervention. This will be changed at some future
date.</p>
<h1 id="developers-aptly-aptly-cli">Aptly CLI</h1>
<p>It is possible to run Aptly commands from the shell on <code>repo.allstarlink.org</code>
in addition to using the web-based API.</p>
<h2 id="developers-aptly-setup">Setup</h2>
<p>All commands to Aptly must be run as the <code>aptly</code> user. To do this,
each account on the repository server should be member of the <code>sudo</code>
and <code>aptly</code> UNIX groups.</p>
<p>Before issuing any Aptly commands run the following:
<div class="highlight"><pre><span></span><code><span class="nb">alias</span><span class="w"> </span><span class="nv">aptly</span><span class="o">=</span><span class="s2">&quot;sudo -u aptly -- aptly&quot;</span>
</code></pre></div>
to ensure that all commands are run as the <code>aptly</code> user.</p>
<h2 id="developers-aptly-adding-a-file-to-a-local-repo">Adding a File to a Local Repo</h2>
<p>Adding a file to the local repo is straight-forward:
<div class="highlight"><pre><span></span><code>aptly<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>REPO<span class="w"> </span>FILE-or-DIR
</code></pre></div></p>
<p>For example, to add the latest Allmon3 to the production
repository:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>aptly<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>asl3-prod<span class="w"> </span>allmon3_1.2.1-2_all.deb
Loading<span class="w"> </span>packages...
<span class="o">[</span>+<span class="o">]</span><span class="w"> </span>allmon3_1.2.1-2_all<span class="w"> </span>added
</code></pre></div></p>
<h2 id="developers-aptly-publishing-repositories">Publishing Repositories</h2>
<p>Coalescing and publishing the public repository with
all components is:
<div class="highlight"><pre><span></span><code>aptly<span class="w"> </span>publish<span class="w"> </span>update<span class="w"> </span>bookworm
</code></pre></div>
When other distributions are supported, replace "bookworm"
with the appropriate distribution. Upon execution, a prompt
will appear for the GPG signing key for the repository. Provide it.</p>
<p>And example, successful publication looks like:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>aptly<span class="w"> </span>publish<span class="w"> </span>update<span class="w"> </span>bookworm
Loading<span class="w"> </span>packages...
Generating<span class="w"> </span>metadata<span class="w"> </span>files<span class="w"> </span>and<span class="w"> </span>linking<span class="w"> </span>package<span class="w"> </span>files...
Finalizing<span class="w"> </span>metadata<span class="w"> </span>files...
Signing<span class="w"> </span>file<span class="w"> </span><span class="s1">&#39;Release&#39;</span><span class="w"> </span>with<span class="w"> </span>gpg,<span class="w"> </span>please<span class="w"> </span>enter<span class="w"> </span>your<span class="w"> </span>passphrase<span class="w"> </span>when<span class="w"> </span>prompted:
Clearsigning<span class="w"> </span>file<span class="w"> </span><span class="s1">&#39;Release&#39;</span><span class="w"> </span>with<span class="w"> </span>gpg,<span class="w"> </span>please<span class="w"> </span>enter<span class="w"> </span>your<span class="w"> </span>passphrase<span class="w"> </span>when<span class="w"> </span>prompted:
Cleaning<span class="w"> </span>up<span class="w"> </span>prefix<span class="w"> </span><span class="s2">&quot;.&quot;</span><span class="w"> </span>components<span class="w"> </span>beta,<span class="w"> </span>devel,<span class="w"> </span>main...

Publish<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>repo<span class="w"> </span>./bookworm<span class="w"> </span><span class="o">[</span>all,<span class="w"> </span>amd64,<span class="w"> </span>arm64,<span class="w"> </span>armhf<span class="o">]</span><span class="w"> </span>publishes<span class="w"> </span><span class="o">{</span>beta:<span class="w"> </span><span class="o">[</span>asl3-beta<span class="o">]}</span>,<span class="w"> </span><span class="o">{</span>devel:<span class="w"> </span><span class="o">[</span>asl3-devel<span class="o">]}</span>,<span class="w"> </span><span class="o">{</span>main:<span class="w"> </span><span class="o">[</span>asl3-prod<span class="o">]}</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>successfully<span class="w"> </span>updated.
</code></pre></div></p>
<h2 id="developers-aptly-searching-for-packages">Searching for Packages</h2>
<p>Listing and searching for packages inside of a local repo is done
with the <code>aptly repo search</code> command and uses the
(Aptly Package Query Language)[https://www.aptly.info/doc/feature/query/]
to filter/select packages.</p>
<p>A simple <code>aptly repo search REPO</code> will show all packages. For example:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>aptly<span class="w"> </span>repo<span class="w"> </span>search<span class="w"> </span>asl3-prod
allmon3_1.2.1-2_all
asl-apt-repos_1.3-1.deb12_all
asl3_3.0.0-1.deb_all
<span class="o">[</span>...<span class="o">]</span>
</code></pre></div></p>
<h5 id="developers-aptly-search-by-name">Search by name</h5>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>aptly<span class="w"> </span>repo<span class="w"> </span>search<span class="w"> </span>asl3-prod<span class="w"> </span><span class="s1">&#39;Name (asl3)&#39;</span>
asl3_3.0.0-1.deb_all
</code></pre></div>
<h5 id="developers-aptly-search-by-name-glob-version">Search by name glob + version</h5>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>aptly<span class="w"> </span>repo<span class="w"> </span>search<span class="w"> </span>asl3-prod<span class="w"> </span><span class="s1">&#39;Name (~ asl3-asterisk*), Version (2:20.7.0+asl3-1.0-5.deb12)&#39;</span>
asl3-asterisk_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-config_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-dev_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-doc_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-modules_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-modules-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-tests_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-tests-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64
</code></pre></div>
<h5 id="developers-aptly-search-by-name-glob-version-range">Search by name glob + version range</h5>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>aptly<span class="w"> </span>repo<span class="w"> </span>search<span class="w"> </span>asl3-prod<span class="w"> </span><span class="s1">&#39;Name (~ asl3-asterisk*), Version (&gt;= 1.0)&#39;</span>
asl3-asterisk_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-config_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-dev_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-doc_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-modules_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-modules-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-tests_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-tests-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64
</code></pre></div>
<h2 id="developers-aptly-promoting-packages-to-prod">Promoting Packages to Prod</h2>
<p>Using the hypothetical example of promoting asl3-asterisk packages
from beta to production.</p>
<p>(1) Test package selection using <code>aptly repo search</code>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>$<span class="w"> </span>aptly<span class="w"> </span>repo<span class="w"> </span>search<span class="w"> </span>asl3-beta<span class="w"> </span><span class="s1">&#39;Name (~ asl3-asterisk*), Version (2:20.7.0+asl3-1.0-5.deb12)&#39;</span>
asl3-asterisk_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk_2:20.7.0+asl3-1.0-5.deb12_arm64
asl3-asterisk-config_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-dbgsym_2:20.7.0+asl3-1.0-5.deb12_arm64
asl3-asterisk-dev_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-doc_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-modules_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-modules_2:20.7.0+asl3-1.0-5.deb12_arm64
asl3-asterisk-modules-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-modules-dbgsym_2:20.7.0+asl3-1.0-5.deb12_arm64
asl3-asterisk-tests_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-tests_2:20.7.0+asl3-1.0-5.deb12_arm64
asl3-asterisk-tests-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64
asl3-asterisk-tests-dbgsym_2:20.7.0+asl3-1.0-5.deb12_arm64
</code></pre></div></p>
<p>(2) Move the packages into the production repository using <code>aptly repo move</code>
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>aptly<span class="w"> </span>repo<span class="w"> </span>move<span class="w"> </span>asl3-beta<span class="w"> </span>asl3-prod<span class="w"> </span><span class="s1">&#39;Name (~ asl3-asterisk*), Version (2:20.7.0+asl3-1.0-5.deb12)&#39;</span>
Loading<span class="w"> </span>packages...
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-dbgsym_2:20.7.0+asl3-1.0-5.deb12_arm64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-doc_2:20.7.0+asl3-1.0-5.deb12_all<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-tests_2:20.7.0+asl3-1.0-5.deb12_amd64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-modules_2:20.7.0+asl3-1.0-5.deb12_arm64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-modules-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-tests_2:20.7.0+asl3-1.0-5.deb12_arm64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-tests-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-modules_2:20.7.0+asl3-1.0-5.deb12_amd64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-dbgsym_2:20.7.0+asl3-1.0-5.deb12_amd64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-dev_2:20.7.0+asl3-1.0-5.deb12_all<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk_2:20.7.0+asl3-1.0-5.deb12_arm64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-modules-dbgsym_2:20.7.0+asl3-1.0-5.deb12_arm64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-config_2:20.7.0+asl3-1.0-5.deb12_all<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk-tests-dbgsym_2:20.7.0+asl3-1.0-5.deb12_arm64<span class="w"> </span>moved
<span class="o">[</span>o<span class="o">]</span><span class="w"> </span>asl3-asterisk_2:20.7.0+asl3-1.0-5.deb12_amd64<span class="w"> </span>moved
</code></pre></div></p>
<p>(3) Update the repository publication
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>aptly<span class="w"> </span>publish<span class="w"> </span>update<span class="w"> </span>bookworm
Loading<span class="w"> </span>packages...
Generating<span class="w"> </span>metadata<span class="w"> </span>files<span class="w"> </span>and<span class="w"> </span>linking<span class="w"> </span>package<span class="w"> </span>files...
Finalizing<span class="w"> </span>metadata<span class="w"> </span>files...
Signing<span class="w"> </span>file<span class="w"> </span><span class="s1">&#39;Release&#39;</span><span class="w"> </span>with<span class="w"> </span>gpg,<span class="w"> </span>please<span class="w"> </span>enter<span class="w"> </span>your<span class="w"> </span>passphrase<span class="w"> </span>when<span class="w"> </span>prompted:
Clearsigning<span class="w"> </span>file<span class="w"> </span><span class="s1">&#39;Release&#39;</span><span class="w"> </span>with<span class="w"> </span>gpg,<span class="w"> </span>please<span class="w"> </span>enter<span class="w"> </span>your<span class="w"> </span>passphrase<span class="w"> </span>when<span class="w"> </span>prompted:
Cleaning<span class="w"> </span>up<span class="w"> </span>prefix<span class="w"> </span><span class="s2">&quot;.&quot;</span><span class="w"> </span>components<span class="w"> </span>beta,<span class="w"> </span>devel,<span class="w"> </span>main...

Publish<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="nb">local</span><span class="w"> </span>repo<span class="w"> </span>./bookworm<span class="w"> </span><span class="o">[</span>all,<span class="w"> </span>amd64,<span class="w"> </span>arm64,<span class="w"> </span>armhf<span class="o">]</span><span class="w"> </span>publishes<span class="w"> </span><span class="o">{</span>beta:<span class="w"> </span><span class="o">[</span>asl3-beta<span class="o">]}</span>,<span class="w"> </span><span class="o">{</span>devel:<span class="w"> </span><span class="o">[</span>asl3-devel<span class="o">]}</span>,<span class="w"> </span><span class="o">{</span>main:<span class="w"> </span><span class="o">[</span>asl3-prod<span class="o">]}</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>successfully<span class="w"> </span>updated.
</code></pre></div></p>
<h2 id="developers-aptly-note-on-all-architecture-packages">Note on 'all' Architecture Packages</h2>
<p>The architecture <code>all</code> denotes that the package contains no
binary compiled code and runs on any architecture. This is meaningful
when handling asl3-asterisk packages for multiple architectures. <strong>Within the
same version and release</strong> only one copy of the <code>all</code> packages needs to
and CAN exist in the repository. The GitHub Runner builder will delete
the <code>all</code> packages for the <code>arm64</code> build since the <code>arm64</code> and <code>amd64</code> 
builds should occur simultaneously.</p>
<p>To delete an extra set of <code>all</code> packages that may have ended up in the
repository:
<div class="highlight"><pre><span></span><code>$<span class="w"> </span>aptly<span class="w"> </span>repo<span class="w"> </span>search<span class="w"> </span>asl3-beta<span class="w"> </span><span class="s1">&#39;Name (~ asl3-asterisk*), Version (2:20.7.0+asl3-1.0-5.deb12), Architecture (all)&#39;</span>
asl3-asterisk-config_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-dev_2:20.7.0+asl3-1.0-5.deb12_all
asl3-asterisk-doc_2:20.7.0+asl3-1.0-5.deb12_all

$<span class="w"> </span>aptly<span class="w"> </span>repo<span class="w"> </span>remove<span class="w"> </span>asl3-beta<span class="w"> </span><span class="s1">&#39;Name (~ asl3-asterisk*), Version (2:20.7.0+asl3-1.0-5.deb12), Architecture (all)&#39;</span>
Loading<span class="w"> </span>packages...
<span class="o">[</span>-<span class="o">]</span><span class="w"> </span>asl3-asterisk-config_2:20.7.0+asl3-1.0-5.deb12_all<span class="w"> </span>removed
<span class="o">[</span>-<span class="o">]</span><span class="w"> </span>asl3-asterisk-doc_2:20.7.0+asl3-1.0-5.deb12_all<span class="w"> </span>removed
<span class="o">[</span>-<span class="o">]</span><span class="w"> </span>asl3-asterisk-dev_2:20.7.0+asl3-1.0-5.deb12_all<span class="w"> </span>removed
</code></pre></div></p></section><h1 class='nav-section-title-end'>Ended: Developer Guide</h1></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 AllStarLink Inc.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://www.allstarlink.org/" target="_blank" rel="noopener" title="AllStarLink Home" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6 31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0l112.3-112.3zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5 50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0 27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/AllStarLink" target="_blank" rel="noopener" title="AllStarLink on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            





  

<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" checked>
<div class="md-consent__settings">
  <ul class="task-list">
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "/", "features": ["content.code.copy", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.081f42fc.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
    
  </body>
</html>